if("undefined"==typeof Int32Array)var Int32Array=Array;if("undefined"==typeof iStoreCommon)var iStoreCommon={};"undefined"==typeof iStoreCommon.iStore&&(iStoreCommon.iStore={});iStoreCommon.iStore.iStoreConfig=function(){this.col=null;this.dummy=this.image_plugin_border_weight=this.image_plugin_gap=this.inner_edge_height=this.inner_edge_width=this.title_edge_height=this.title_edge_width=this.default_edge_height=this.default_edge_width=this.border_weight=this.title_row=this.row=0};
iStoreCommon.iStore.iStorePos=function(){this.height2=this.height=this.width=this.y2=this.x2=this.y1=this.x1=0};iStoreCommon.iStore.iStoreGrid=function(){this.cy=this.cx=this.y=this.x=0};iStoreCommon.iStore.iStoreSize=function(){this.border_height=this.border_width=this.height=this.width=0};iStoreCommon.iStore.iStoreImageSize=function(){this.h=this.w=0};var Config=null,Config=Array(200);Config[0]=new iStoreCommon.iStore.iStoreConfig;Config[0].col=new Int32Array(3);Config[0].col[0]=196;
Config[0].col[1]=710;Config[0].col[2]=294;Config[0].row=50;Config[0].title_row=1;Config[0].border_weight=1;Config[0].default_edge_width=5;Config[0].default_edge_height=5;Config[0].title_edge_width=5;Config[0].title_edge_height=5;Config[0].inner_edge_width=5;Config[0].inner_edge_height=5;Config[0].image_plugin_gap=6;Config[0].image_plugin_border_weight=1;Config[100]=new iStoreCommon.iStore.iStoreConfig;Config[100].col=new Int32Array(1);Config[100].col[0]=640;Config[100].row=40;
Config[100].title_row=2;Config[100].border_weight=0;Config[100].default_edge_width=0;Config[100].default_edge_height=5;Config[100].title_edge_width=10;Config[100].title_edge_height=5;Config[100].inner_edge_width=10;Config[100].inner_edge_height=5;Config[100].image_plugin_gap=6;Config[100].image_plugin_border_weight=1;Config[101]=new iStoreCommon.iStore.iStoreConfig;Config[101].col=new Int32Array(1);Config[101].col[0]=640;Config[101].row=40;Config[101].title_row=2;Config[101].border_weight=0;
Config[101].default_edge_width=0;Config[101].default_edge_height=0;Config[101].title_edge_width=0;Config[101].title_edge_height=0;Config[101].inner_edge_width=0;Config[101].inner_edge_height=5;Config[101].image_plugin_gap=10;Config[101].image_plugin_border_weight=1;
function csharp_grid_to_pos(a,b,c,d,n){for(var g=new iStoreCommon.iStore.iStorePos,q=0,f=0,q=0;q<Config[a].col.length;q++)b==q&&(g.x1=f),b+d==q&&(g.x2=f-1),f+=Config[a].col[q];b>=Config[a].col.length&&(g.x1=f);b+d>=Config[a].col.length&&(g.x2=f-1);g.y1=c*Config[a].row;g.y2=(c+n)*Config[a].row-1;g.width=g.x2+1-g.x1;g.height=g.y2+1-g.y1;return g}
function csharp_pos_to_grid(a,b,c,d){for(var n=new iStoreCommon.iStore.iStoreGrid,g=0,q=0,g=0;g<Config[a].col.length;g++)if(q+=Config[a].col[g],q>b){n.x=g;break}b>=q&&(n.x=0<d?Config[a].col.length-1:Config[a].col.length);n.y=0>=c?0:System.Math.Round$$Double(c/Config[a].row);return n}function csharp_get_max_grid_width(a){return Config[a].col.length}
function csharp_get_plugin_size(a,b,c,d,n){a=Config[a];var g=new iStoreCommon.iStore.iStoreSize;if(3==d)g.border_width=b-2*(a.border_weight+a.default_edge_width),g.border_height=c-2*(a.border_weight+a.default_edge_height),g.width=b-2*(a.border_weight+a.default_edge_width+a.inner_edge_width),g.height=c-(a.row*a.title_row+2*a.inner_edge_height);else switch(n){case 0:g.border_width=b-2*a.default_edge_width;g.border_height=c-2*a.default_edge_height;g.width=b-2*a.default_edge_width;g.height=c-2*a.default_edge_height;
break;case 1:g.border_width=b-2*(a.border_weight+a.default_edge_width+a.inner_edge_width);g.border_height=c-2*(a.border_weight+a.default_edge_height+a.inner_edge_height);g.width=b-2*(a.border_weight+a.default_edge_width+a.inner_edge_width);g.height=c-2*(a.border_weight+a.default_edge_height+a.inner_edge_height);break;default:g.border_width=b-2*(a.border_weight+a.default_edge_width),g.border_height=c-2*(a.border_weight+a.default_edge_height),g.width=b-2*(a.border_weight+a.default_edge_width+a.title_edge_width),
g.height=c-(a.row*a.title_row+2*a.title_edge_height)}return g}
function csharp_size_image_calc(a,b,c,d,n,g,q){var f=Array(10);b=csharp_get_plugin_size(a,b,c,d,n);var m=b.width,e=b.height,k=Config[a].image_plugin_border_weight,p=Config[a].image_plugin_gap;f[0]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m;a.h=e;return a}();f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=0;a.h=0;return a}();f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=0;a.h=0;return a}();f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;
a.w=0;a.h=0;return a}();f[4]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=0;a.h=0;return a}();f[5]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=0;a.h=0;return a}();f[6]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=0;a.h=0;return a}();f[7]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=0;a.h=0;return a}();f[8]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=0;a.h=0;return a}();f[9]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;
a.w=0;a.h=0;return a}();var h,l;switch(g){case 1:f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m;a.h=e;return a}();break;case 2:switch(q){case 0:h=System.Math.Floor$$Double((m-4*k)/3);l=System.Math.Floor$$Double(e-2*k);f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-4*k-2*h;a.h=l;return a}();f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();
break;case 1:h=System.Math.Floor$$Double((m-6*k-2*p)/3),l=System.Math.Floor$$Double(e-2*k),f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-6*k-2*p-2*h;a.h=l;return a}(),f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}()}break;case 3:switch(q){case 0:h=System.Math.Floor$$Double((m-3*k)/2);l=System.Math.Floor$$Double(0.4*(e-3*k));f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;
a.w=m-2*k;a.h=e-l-3*k;return a}();f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-h-3*k;a.h=l;return a}();break;case 1:h=System.Math.Floor$$Double((m-4*k-p)/2),l=System.Math.Floor$$Double(0.4*(e-4*k-p)),f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-2*k;a.h=e-l-4*k-p;return a}(),f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[3]=function(){var a=
new iStoreCommon.iStore.iStoreImageSize;a.w=m-h-4*k-p;a.h=l;return a}()}break;case 4:switch(q){case 0:h=System.Math.Floor$$Double((m-3*k)/3);l=System.Math.Floor$$Double((e-4*k)/3);f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-3*k-h;a.h=e-2*k;return a}();f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=e-4*k-2*l;return a}();f[4]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;
a.w=h;a.h=l;return a}();break;case 1:h=System.Math.Floor$$Double((m-4*k-p)/3),l=System.Math.Floor$$Double((e-6*k-2*p)/3),f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-4*k-p-h;a.h=e-2*k;return a}(),f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=e-6*k-2*p-2*l;return a}(),f[4]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}()}break;case 5:switch(q){case 0:h=
System.Math.Floor$$Double((m-6*k)/5);l=System.Math.Floor$$Double(e-2*k);f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-6*k-4*h;a.h=l;return a}();f[4]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[5]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();
break;case 1:h=System.Math.Floor$$Double((m-10*k-4*p)/5),l=System.Math.Floor$$Double(e-2*k),f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-10*k-4*p-4*h;a.h=l;return a}(),f[4]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[5]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;
a.w=h;a.h=l;return a}()}break;case 6:switch(q){case 0:h=System.Math.Floor$$Double((m-5*k)/5);l=System.Math.Floor$$Double((e-3*k)/2);f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=2*h+1*k;a.h=e-3*k-l;return a}();f[4]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-5*k-4*h;a.h=e-2*k;return a}();f[5]=
function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=2*h;a.h=l;return a}();f[6]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=2*h;a.h=e-3*k-l;return a}();break;case 1:h=System.Math.Floor$$Double((m-8*k-3*p)/5),l=System.Math.Floor$$Double((e-4*k-1*p)/2),f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;
a.w=2*h+2*k+1*p;a.h=e-4*k-1*p-l;return a}(),f[4]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-8*k-3*p-4*h;a.h=e-2*k;return a}(),f[5]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=2*h;a.h=l;return a}(),f[6]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=2*h;a.h=e-4*k-1*p-l;return a}()}break;case 7:switch(q){case 0:h=System.Math.Floor$$Double((m-3*k)/2);l=System.Math.Floor$$Double((e-5*k)/9);f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;
a.w=m-2*k;a.h=e-3*l-5*k;return a}();f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-h-3*k;a.h=l;return a}();f[4]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[5]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-h-3*k;a.h=l;return a}();f[6]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[7]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;
a.w=m-h-3*k;a.h=l;return a}();break;case 1:h=System.Math.Floor$$Double((m-4*k-1*p)/2),l=System.Math.Floor$$Double((e-8*k-3*p)/9),f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-2*k;a.h=e-3*l-8*k-3*p;return a}(),f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-h-4*k-1*p;a.h=l;return a}(),f[4]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[5]=
function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-h-4*k-1*p;a.h=l;return a}(),f[6]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[7]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-h-4*k-1*p;a.h=l;return a}()}break;case 8:switch(q){case 0:h=System.Math.Floor$$Double((m-3*k)/2);l=System.Math.Floor$$Double((e-5*k)/4);f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;
a.w=m-3*k-h;a.h=l;return a}();f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=e-5*k-3*l;return a}();f[4]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-3*k-h;a.h=e-5*k-3*l;return a}();f[5]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[6]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-3*k-h;a.h=l;return a}();f[7]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[8]=function(){var a=
new iStoreCommon.iStore.iStoreImageSize;a.w=m-3*k-h;a.h=l;return a}();break;case 1:h=System.Math.Floor$$Double((m-4*k-1*p)/2),l=System.Math.Floor$$Double((e-8*k-3*p)/4),f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-4*k-1*p-h;a.h=l;return a}(),f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=e-26-3*l;return a}(),f[4]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;
a.w=m-4*k-1*p-h;a.h=e-8*k-3*p-3*l;return a}(),f[5]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[6]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-4*k-1*p-h;a.h=l;return a}(),f[7]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[8]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-4*k-1*p-h;a.h=l;return a}()}break;case 9:switch(q){case 0:h=System.Math.Floor$$Double((m-4*k)/3);l=System.Math.Floor$$Double((e-
4*k)/3);f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-4*k-2*h;a.h=l;return a}();f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[4]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=e-4*k-2*l;return a}();f[5]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-4*k-2*h;a.h=e-4*k-2*l;return a}();f[6]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;
a.w=h;a.h=e-4*k-2*l;return a}();f[7]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[8]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-4*k-2*h;a.h=l;return a}();f[9]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();break;case 1:h=System.Math.Floor$$Double((m-6*k-2*p)/3),l=System.Math.Floor$$Double((e-6*k-2*p)/3),f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[2]=function(){var a=
new iStoreCommon.iStore.iStoreImageSize;a.w=m-6*k-2*p-2*h;a.h=l;return a}(),f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[4]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=e-6*k-2*p-2*l;return a}(),f[5]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-6*k-2*p-2*h;a.h=e-6*k-2*p-2*l;return a}(),f[6]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=e-6*k-2*p-2*l;return a}(),f[7]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;
a.w=h;a.h=l;return a}(),f[8]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-6*k-2*p-2*h;a.h=l;return a}(),f[9]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}()}break;case 10:switch(q){case 0:h=System.Math.Floor$$Double((m-3*k)/2);l=System.Math.Floor$$Double(e-2*k);f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-3*k-h;a.h=l;return a}();break;case 1:h=
System.Math.Floor$$Double((m-4*k-1*p)/2),l=System.Math.Floor$$Double(e-2*k),f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-4*k-1*p-h;a.h=l;return a}()}break;case 11:switch(q){case 0:h=System.Math.Floor$$Double((m-5*k)/4);l=System.Math.Floor$$Double(e-2*k);f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;
a.w=m-5*k-3*h;a.h=l;return a}();f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[4]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();break;case 1:h=System.Math.Floor$$Double((m-8*k-3*p)/4),l=System.Math.Floor$$Double(e-2*k),f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-8*k-3*p-3*h;a.h=l;return a}(),f[3]=function(){var a=
new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[4]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}()}break;case 12:case 13:switch(q){case 0:h=System.Math.Floor$$Double((m-3*k)/2);l=System.Math.Floor$$Double((e-3*k)/2);f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-3*k-h;a.h=e-2*k;return a}();f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;
a.w=h;a.h=e-3*k-l;return a}();break;case 1:h=System.Math.Floor$$Double((m-4*k-1*p)/2),l=System.Math.Floor$$Double((e-4*k-1*p)/2),f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-4*k-1*p-h;a.h=e-2*k;return a}(),f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=e-4*k-1*p-l;return a}()}break;case 14:switch(q){case 0:h=System.Math.Floor$$Double((m-3*k)/2);l=System.Math.Floor$$Double((e-
3*k)/2);f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-3*k-h;a.h=l;return a}();f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=e-3*k-l;return a}();f[4]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-3*k-h;a.h=e-3*k-l;return a}();break;case 1:h=System.Math.Floor$$Double((m-4*k-1*p)/2),l=System.Math.Floor$$Double((e-4*k-1*p)/2),f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;
a.w=h;a.h=l;return a}(),f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-4*k-1*p-h;a.h=l;return a}(),f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=e-4*k-1*p-l;return a}(),f[4]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-4*k-1*p-h;a.h=e-4*k-1*p-l;return a}()}break;case 15:switch(q){case 0:h=System.Math.Floor$$Double((m-3*k)/2);l=System.Math.Floor$$Double((e-4*k)/3);f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=
l;return a}();f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-3*k-h;a.h=l;return a}();f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}();f[4]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-3*k-h;a.h=l;return a}();f[5]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=e-4*k-2*l;return a}();f[6]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-3*k-h;a.h=e-4*k-2*l;return a}();break;case 1:h=System.Math.Floor$$Double((m-
4*k-1*p)/2),l=System.Math.Floor$$Double((e-6*k-2*p)/3),f[1]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[2]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-4*k-1*p-h;a.h=l;return a}(),f[3]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=l;return a}(),f[4]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-4*k-1*p-h;a.h=l;return a}(),f[5]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=h;a.h=e-6*k-2*p-
2*l;return a}(),f[6]=function(){var a=new iStoreCommon.iStore.iStoreImageSize;a.w=m-4*k-1*p-h;a.h=e-6*k-2*p-2*l;return a}()}}return f};var iStorePluginConstant=function(){this.SHOW_MODE_DISPLAY=0;this.SHOW_MODE_EDIT=1;this.SHOW_MODE_PREVIEW=2;this.SHOW_MODE_STATIC=3;this.DEFAULT_IMAGE="/Scripts/iStore/images/default.jpg"},PluginConstant=new iStorePluginConstant;var istore_plugin_store_link_type_data=null,istore_plugin_seller_sub_list_data=null,iStorePlugin=function(a){var b=this;this.storelist=[];this.seller_sub_id=null;var c={icon:"<div></div>",tools_bar:$("<div></div>"),page_id:0,plugin_type:-1,plugin_device:Constant.STORE_DEVICE_PC,containers:null,frame_config:Constant.ISTORE_FRAME_CONFIG_PC_STYLE_B2C,show_mode:PluginConstant.SHOW_MODE_DISPLAY,grid_cx_min:1,grid_cy_min:1,grid_cx_max:-1,grid_cy_max:-1,grid_cx_init:1,grid_cy_init:1,tools_show_resize:!0,
icon:null,content:null,on_get_right_size:null,on_get_parts_size:null,on_dropdown:null,on_show:null,on_setting:null,on_moved:null,on_sized:null,on_sizing:null,on_remove:null,can_layout:!1,can_setting:!1};this.opts=$.extend({},c,a);this.sell_sub_rules=this.link_type_info=null;this.init_sub_rules=!0;this.plugin_type=this.opts.plugin_type;this.device=this.opts.plugin_device;this.frame_config=this.opts.frame_config;this.show_mode=this.opts.show_mode;this.layout_id=this.plugin_id=-1;this.grid_y=this.grid_x=
0;this.grid_cy=this.grid_cx=1;this.is_new=!0;this.is_resizing=this.is_draging=!1;this.frame=$('<div type="plugin"></div>').addClass("plugin_containers");this.body=$('<div style="width:100%;height:100%;"></div>');this.body.appendTo(this.frame);this.icon=null;this.frame_border1=$('<div class="plugin_move_border1"></div>');this.frame_border2=$('<div class="plugin_move_border2"></div>');this.frame_border3=$('<div class="plugin_move_border3"></div>');this.frame_border4=$('<div class="plugin_move_border4"></div>');
this.frame_remove=$('<div class="plugin_remove icon_del_drag"></div>');this.frame_border1.hide();this.frame_border2.hide();this.frame_border3.hide();this.frame_border4.hide();this.frame_remove.hide();this.frame_border1.appendTo(this.frame);this.frame_border2.appendTo(this.frame);this.frame_border3.appendTo(this.frame);this.frame_border4.appendTo(this.frame);this.frame_remove.appendTo(this.frame);this.set_icon(this.opts.icon);this.set_content(this.opts.content);this.show_mode==PluginConstant.SHOW_MODE_EDIT&&
this.opts.can_layout&&($(this.frame).draggable({cursor:"move",helper:"clone",addClasses:!1,zIndex:100,opacity:0.4,refreshPositions:!1,start:function(a,c){CheckInput.IsEmpty(b.frame)||b.frame.find(".plugin_touch").unbind("click",plugin_setting);if(!CheckInput.IsEmpty(b.opts.containers))b.opts.containers.on_move_start(b,a,c)},stop:function(a,c){if(!CheckInput.IsEmpty(b.opts.containers))b.opts.containers.on_move_stop(b,a,c);setTimeout(function(){CheckInput.IsEmpty(b.frame)||b.frame.find(".plugin_touch").bind("click",
b,plugin_setting)},100)},drag:function(a,c){if(!CheckInput.IsEmpty(b.opts.containers))b.opts.containers.on_move_drag(b,a,c)}}),$('<div style="display:none;"></div>').addClass("plugin_touch").appendTo(this.frame),this.opts.tools_show_resize&&$(this.frame).resizable({autoHide:!0,helper:"plugin_resizable_helper",start:function(a,c){if(!CheckInput.IsEmpty(b.opts.containers))b.opts.containers.on_size_start(b,a,c)},stop:function(a,c){if(!CheckInput.IsEmpty(b.opts.containers))b.opts.containers.on_size_stop(b,
a,c)},resize:function(a,c){if(!CheckInput.IsEmpty(b.opts.containers))b.opts.containers.on_size_resize(b,a,c)}}),this.frame_remove.click(function(){b.on_remove()}));this.body.hide()};
iStorePlugin.prototype={add_touch:function(){this.opts.can_layout&&($(this.frame).draggable("option","handle",".plugin_touch"),$(this.frame).draggable("option","cancel",".plugin_touch_cancel"));this.opts.can_setting&&this.frame.find(".plugin_touch").bind("click",this,plugin_setting)},remove:function(){this.frame.remove();this.frame=null},appendTo:function(a){this.frame.appendTo(a)},move:function(a,b,c,d){this.frame.css("position","absolute");this.frame.css("left",a+"px");this.frame.css("top",b+"px");
this.size(c,d)},size:function(a,b){this.frame.width(a);this.frame.height(b);this.body.width(a);this.body.height(b);this.frame_border1.width(0);this.frame_border1.height(b+4);this.frame_border2.width(a+4);this.frame_border2.height(0);this.frame_border3.width(0);this.frame_border3.height(b+4);this.frame_border4.width(a+4);this.frame_border4.height(0)},show:function(){this.frame.show()},hide:function(){this.frame.hide()},get_body:function(){return this.frame},get_right_size:function(a,b,c,d){return CheckInput.IsEmpty(this.opts.on_get_right_size)?
(ret={},ret.cx=c,ret.cy=d,ret):this.opts.on_get_right_size(this,a,b,c,d)},get_parts_size:function(a){return CheckInput.IsEmpty(this.opts.on_get_parts_size)?(ret={},ret.w=this.body.width(),ret.h=this.body.height(),ret):this.opts.on_get_parts_size(this,a)},set_content:function(a){CheckInput.IsEmpty(a)||(this.body.empty(),$(a).appendTo(this.body),this.show_mode==PluginConstant.SHOW_MODE_EDIT&&this.body.disableSelection())},set_icon:function(a){CheckInput.IsEmpty(this.icon)||$(this.icon).remove();this.icon=
$(a).appendTo(this.frame);this.icon.addClass("plugin_icon")},show_icon:function(){CheckInput.IsEmpty(this.icon)||($(this.icon).show(),$(this.frame).width($(this.icon).width()),$(this.frame).height($(this.icon).height()),this.body.hide(),this.frame_border1.hide(),this.frame_border2.hide(),this.frame_border3.hide(),this.frame_border4.hide(),this.frame_remove.hide());$(this).children(".ui-icon").hide();this.opts.can_layout&&this.opts.tools_show_resize&&$(this.frame).resizable("disable")},show_normal:function(){var a=
this;CheckInput.IsEmpty(this.icon)||$(this.icon).hide();this.body.show();this.show_mode==PluginConstant.SHOW_MODE_EDIT&&(this.frame.hover(function(){a.opts.can_layout||a.opts.can_setting?(a.frame_border1.show(),a.frame_border2.show(),a.frame_border3.show(),a.frame_border4.show()):(a.frame_border1.hide(),a.frame_border2.hide(),a.frame_border3.hide(),a.frame_border4.hide());a.opts.can_layout?a.frame_remove.show():a.frame_remove.hide();$(this).children(".ui-icon").show()},function(){a.frame_border1.hide();
a.frame_border2.hide();a.frame_border3.hide();a.frame_border4.hide();a.frame_remove.hide();$(this).children(".ui-icon").hide()}),this.opts.can_layout&&this.opts.tools_show_resize&&$(this.frame).resizable("enable"))},on_show:function(a){a?this.get_data():this.show_data();this.frame.attr("p_id",this.plugin_id)},on_dropdown:function(a,b,c){if(this.opts.can_layout&&!CheckInput.IsEmpty(this.opts.on_dropdown))this.opts.on_dropdown(this,a,b,c)},on_moved:function(a,b){if(this.opts.can_layout&&!CheckInput.IsEmpty(this.opts.on_moved))this.opts.on_moved(this,
a,b)},on_sized:function(a,b){if(this.opts.can_layout&&!CheckInput.IsEmpty(this.opts.on_sized))this.opts.on_sized(this,a,b)},on_sizing:function(a,b){if(this.opts.can_layout&&!CheckInput.IsEmpty(this.opts.on_sizing))this.opts.on_sizing(this,a,b)},on_remove:function(){if(this.opts.can_layout&&!CheckInput.IsEmpty(this.opts.on_remove))this.opts.on_remove(this)},on_setting:function(){if(this.opts.can_setting&&null!=this.opts.on_setting)this.opts.on_setting(this)},show_data:function(){if(!CheckInput.IsEmpty(this.data)&&
!CheckInput.IsEmpty(this.opts.on_show))this.opts.on_show(this);this.show_mode==PluginConstant.SHOW_MODE_EDIT&&this.add_touch()},get_data:function(){show_data()},get_store_link_type:function(a,b,c){var d=this;null==istore_plugin_store_link_type_data?ajax_path(d.opts.action_path.GetStoreLinkType,{device:d.device,save_level:Constant.PAGE_SAVE_LEVEL_EDIT,status:c},function(b){istore_plugin_store_link_type_data=b.link_type_info;d.link_type_info=$.extend(!0,{},istore_plugin_store_link_type_data);null!=
a&&a(b)},!1,function(a){null!=b&&b(a)}):(d.link_type_info=$.extend(!0,{},istore_plugin_store_link_type_data),null!=a&&a({link_type_info:d.link_type_info}))},init_link_type:function(a,b,c){function d(){var b=a.find("#class1_select").find("option:selected").val();a.find("#class2_select").empty();a.find("#class3_select").empty();0<=b?(k.nav_class2=store_nav_data.store_nav.StoreNavClass1[b].StoreNavClass2,$("#plugin_edit_dialog_class2_tmpl").tmpl(k).appendTo(a.find("#class2_select"))):$("#plugin_edit_dialog_class2_tmpl").tmpl(null).appendTo(a.find("#class2_select"));
$("#plugin_edit_dialog_class3_tmpl").tmpl(null).appendTo(a.find("#class3_select"))}function n(){var b=a.find("#class1_select").find("option:selected").val(),c=a.find("#class2_select").find("option:selected").val();a.find("#class3_select").empty();0<=c?(k.nav_class3=store_nav_data.store_nav.StoreNavClass1[b].StoreNavClass2[c].StoreNavClass3,$("#plugin_edit_dialog_class3_tmpl").tmpl(k).appendTo(a.find("#class3_select"))):$("#plugin_edit_dialog_class3_tmpl").tmpl(null).appendTo(a.find("#class3_select"))}
function g(){a.find("#link_param_sales_type").change(function(){e.GetStoreSalesRule(e.seller_sub_id);f("link_param_sales_type")});e.GetStoreSalesRule(e.seller_sub_id);f("link_param_sales_type")}function q(){a.find("#shop_name_input").autocomplete({autoFocus:!0,source:function(a,b){var c=a.term;if(c){for(var g=[],d=0;d<e.storelist.length;d++)-1<e.storelist[d].name.toLowerCase().indexOf(c.toLowerCase())&&g.push(e.storelist[d].name);result=findedResults=$.map(g,function(a){return a})}b(result)},select:function(b,
c){e.seller_sub_id=e.GetSellerSubId(c.item.value);e.GetStoreSalesRule(e.seller_sub_id);a.find("#link_param_sales_type_show").empty();$("#plugin_edit_dialog_store_sales_type_tmpl").tmpl({SalesType:e.link_type_info.StoreSalesRuleData}).appendTo(a.find("#link_param_sales_type_show"));f("shop_name_input");g()}});$(".ui-autocomplete").css("max-height","150px").css("overflow-x","auto")}function f(b){switch(b){case "link_param_shop_type":a.find("#link_param_shop_type").val()==Constant.SHOP_TYPE_STORE?(a.find("#shop_name_show").hide(),
e.seller_sub_id=Constant.STORE_SELLER_SUB_ID,e.GetStoreSalesRule(e.seller_sub_id),a.find("#link_param_sales_type_show").empty(),$("#plugin_edit_dialog_store_sales_type_tmpl").tmpl({SalesType:e.link_type_info.StoreSalesRuleData}).appendTo(a.find("#link_param_sales_type_show")),g()):(a.find("#link_param_shop_type").val()==Constant.SHOP_TYPE_SELLERSUB?(a.find("#shop_name_show").show(),a.find("#shop_name_input").val(""),e.seller_sub_id=Constant.STORE_SELLER_SUB_ID,e.GetSellerSub(),q()):(a.find("#shop_name_show").hide(),
a.find("#shop_name_input").val(""),e.seller_sub_id=Constant.STORE_SELLER_SUB_ID),a.find("#link_param_sales_type_show").empty(),$("#plugin_edit_dialog_store_sales_type_tmpl").tmpl({SalesType:Array({Type:Constant.SALESRULE_NULL,Name:"\u8bf7\u9009\u62e9"})}).appendTo(a.find("#link_param_sales_type_show")));break;case "shop_name_input":a.find("#link_param_sales_type").val(Constant.SALESRULE_NULL)}b=a.find("#link_param_shop_type").val();CheckInput.IsEmpty(b)&&(b=Constant.SHOP_TYPE_SELLERSUB);var c=a.find("#link_param_sales_type").val(),
d=a.find("#link_param_sales_show");d.empty();if(c==Constant.SALESRULE_NULL)$("#plugin_edit_dialog_store_sales_tmpl").tmpl({Sales:[]}).appendTo(d);else{for(var f=[],n=0;n<e.link_type_info.StoreSalesRuleData.length;n++)if(e.link_type_info.StoreSalesRuleData[n].Type==c)for(var h=0;h<e.link_type_info.StoreSalesRuleData[n].Rule.length;h++)b==Constant.SHOP_TYPE_STORE?e.link_type_info.StoreSalesRuleData[n].Rule[h].SellerSubId==Constant.STORE_SELLER_SUB_ID&&f.push(e.link_type_info.StoreSalesRuleData[n].Rule[h]):
b==Constant.SHOP_TYPE_SELLERSUB&&e.link_type_info.StoreSalesRuleData[n].Rule[h].SellerSubId!=Constant.STORE_SELLER_SUB_ID&&e.link_type_info.StoreSalesRuleData[n].Rule[h].SellerSubId==e.seller_sub_id&&f.push(e.link_type_info.StoreSalesRuleData[n].Rule[h]);$("#plugin_edit_dialog_store_sales_tmpl").tmpl({Sales:f}).appendTo(d)}}function m(){var b=a.find("#tag_class").find("option:selected").val();a.find("#tag_item").empty();0<=b?$("#plugin_edit_dialog_tag_item_tmpl").tmpl(e.link_type_info.TagClass[b]).appendTo(a.find("#tag_item")):
$("#plugin_edit_dialog_tag_item_tmpl").tmpl(null).appendTo(a.find("#tag_item"))}var e=this;e.seller_sub_id=c;switch(this.device){case Constant.STORE_DEVICE_PC:case Constant.STORE_DEVICE_MOBILE:$("#plugin_edit_dialog_link_param_tmpl").tmpl({link_data:b,opts:e.opts}).appendTo(a);break;case Constant.STORE_DEVICE_WEIXIN:$("#plugin_edit_dialog_o2o_link_param_tmpl").tmpl({link_data:b,opts:e.opts}).appendTo(a)}$("#plugin_edit_dialog_store_news_tmpl").tmpl({News:e.link_type_info.StoreNews}).appendTo(a.find("#link_param_news_show"));
b.LinkType==Constant.LINK_TYPE_NEWS&&a.find("#link_param_news").val(b.LinkParam);c=e.link_type_info.StorePage;$("#plugin_edit_dialog_store_page_tmpl").tmpl({Pages:c}).appendTo(a.find("#link_param_page_show"));b.LinkType==Constant.LINK_TYPE_PAGE&&a.find("#link_param_page").val(b.LinkParam);var k={};k.nav_class1=store_nav_data.store_nav.StoreNavClass1;$("#plugin_edit_dialog_class1_tmpl").tmpl(k).appendTo(a.find("#class1_select"));$("#plugin_edit_dialog_class2_tmpl").tmpl(k).appendTo(a.find("#class2_select"));
$("#plugin_edit_dialog_class3_tmpl").tmpl(k).appendTo(a.find("#class3_select"));a.find("#class1_select").change(function(){d()});a.find("#class2_select").change(function(){n()});if(b.LinkType==Constant.LINK_TYPE_CLASS)try{var p=$.parseJSON(b.LinkParam);if(0<p.class1_id){var h=a.find("#class1_select option[class_id="+p.class1_id+"]").val();a.find("#class1_select").val(h);d()}if(0<p.class2_id){var l=a.find("#class2_select option[class_id="+p.class2_id+"]").val();a.find("#class2_select").val(l);n()}if(0<
p.class3_id){var u=a.find("#class3_select option[class_id="+p.class3_id+"]").val();a.find("#class3_select").val(u)}}catch(w){}if(b.LinkType==Constant.LINK_TYPE_SALES)try{var r=$.parseJSON(b.LinkParam);CheckInput.IsNumber(r)||-1==r?(a.find("#shop_name_show").hide(),a.find("#link_param_shop_type").val(Constant.SHOP_TYPE_STORE),e.seller_sub_id=Constant.STORE_SELLER_SUB_ID,e.GetStoreSalesRule(e.seller_sub_id)):r.seller_sub_id==Constant.STORE_SELLER_SUB_ID||null==r.seller_sub_id||!1==e.opts.store_info.multiuser_support?
(a.find("#shop_name_show").hide(),a.find("#link_param_shop_type").val(Constant.SHOP_TYPE_STORE),e.seller_sub_id=Constant.STORE_SELLER_SUB_ID,e.GetStoreSalesRule(e.seller_sub_id)):(a.find("#shop_name_show").show(),a.find("#link_param_shop_type").val(Constant.SHOP_TYPE_SELLERSUB),a.find("#shop_name_input").val(r.seller_sub_name),e.seller_sub_id=r.seller_sub_id,e.GetStoreSalesRule(e.seller_sub_id),e.GetSellerSub(),q())}catch(x){}a.find("#link_param_sales_type_show").empty();$("#plugin_edit_dialog_store_sales_type_tmpl").tmpl({SalesType:e.link_type_info.StoreSalesRuleData}).appendTo(a.find("#link_param_sales_type_show"));
a.find("#link_param_sales_show").empty();$("#plugin_edit_dialog_store_sales_tmpl").tmpl({Sales:null}).appendTo(a.find("#link_param_sales_show"));if(b.LinkType==Constant.LINK_TYPE_SALES)if(r=$.parseJSON(b.LinkParam),p=!1,CheckInput.IsNumber(r)||-1==r)for(var s=1;s<e.link_type_info.StoreSalesRuleData.length;s++){for(var t=0;t<e.link_type_info.StoreSalesRuleData[s].Rule.length;t++)if(e.link_type_info.StoreSalesRuleData[s].Rule[t].Id==r||-1==r){a.find("#link_param_sales_type").val(e.link_type_info.StoreSalesRuleData[s].Type);
f("link_param_sales_type");a.find("#link_param_sales").val(r);p=!0;break}if(p)break}else for(s=1;s<e.link_type_info.StoreSalesRuleData.length;s++){for(t=0;t<e.link_type_info.StoreSalesRuleData[s].Rule.length;t++){if(-1==r.sales_id){a.find("#link_param_sales_type").val(r.sales_type);f("link_param_sales_type");p=!0;break}if(e.link_type_info.StoreSalesRuleData[s].Rule[t].Id==r.sales_id){a.find("#link_param_sales_type").val(e.link_type_info.StoreSalesRuleData[s].Type);f("link_param_sales_type");a.find("#link_param_sales").val(r.sales_id);
p=!0;break}}if(p)break}a.find("#link_param_shop_type").change(function(){f("link_param_shop_type")});f("link_param_shop_type");g();a.find("#tag_class").change(function(){m()});$("#plugin_edit_dialog_tag_class_tmpl").tmpl(e.link_type_info).appendTo(a.find("#tag_class"));m();if(b.LinkType==Constant.LINK_TYPE_TAGITEM)try{for(var v=b.LinkParam,s=0;s<e.link_type_info.TagClass.length;s++)for(t=0;t<e.link_type_info.TagClass[s].TagItem.length;t++)e.link_type_info.TagClass[s].TagItem[t].TagItemId==v&&(a.find("#tag_class").val(s),
m(),a.find("#tag_item").val(v))}catch(y){}$("#plugin_edit_dialog_seller_sub_tmpl").tmpl(e.link_type_info).appendTo(a.find("#link_param_seller_sub_show"));b.LinkType==Constant.LINK_TYPE_SELLER_SUB&&a.find("#link_param_seller_sub").val(b.LinkParam)},init_link_type:function(a,b,c){switch(this.device){case Constant.STORE_DEVICE_PC:case Constant.STORE_DEVICE_MOBILE:this.init_b2c_link_type(a,b,c);break;case Constant.STORE_DEVICE_WEIXIN:this.init_o2o_link_type(a,b)}},init_b2c_link_type:function(a,b,c){function d(){var b=
a.find("#class1_select").find("option:selected").val();a.find("#class2_select").empty();a.find("#class3_select").empty();0<=b?(k.nav_class2=store_nav_data.store_nav.StoreNavClass1[b].StoreNavClass2,$("#plugin_edit_dialog_class2_tmpl").tmpl(k).appendTo(a.find("#class2_select"))):$("#plugin_edit_dialog_class2_tmpl").tmpl(null).appendTo(a.find("#class2_select"));$("#plugin_edit_dialog_class3_tmpl").tmpl(null).appendTo(a.find("#class3_select"))}function n(){var b=a.find("#class1_select").find("option:selected").val(),
c=a.find("#class2_select").find("option:selected").val();a.find("#class3_select").empty();0<=c?(k.nav_class3=store_nav_data.store_nav.StoreNavClass1[b].StoreNavClass2[c].StoreNavClass3,$("#plugin_edit_dialog_class3_tmpl").tmpl(k).appendTo(a.find("#class3_select"))):$("#plugin_edit_dialog_class3_tmpl").tmpl(null).appendTo(a.find("#class3_select"))}function g(){a.find("#link_param_sales_type").change(function(){e.GetStoreSalesRule(e.seller_sub_id);f("link_param_sales_type")});e.GetStoreSalesRule(e.seller_sub_id);
f("link_param_sales_type")}function q(){a.find("#shop_name_input").autocomplete({autoFocus:!0,source:function(a,b){var c=a.term;if(c){for(var g=[],d=0;d<e.storelist.length;d++)-1<e.storelist[d].name.toLowerCase().indexOf(c.toLowerCase())&&g.push(e.storelist[d].name);result=findedResults=$.map(g,function(a){return a})}b(result)},select:function(b,c){e.seller_sub_id=e.GetSellerSubId(c.item.value);e.GetStoreSalesRule(e.seller_sub_id);a.find("#link_param_sales_type_show").empty();$("#plugin_edit_dialog_store_sales_type_tmpl").tmpl({SalesType:e.link_type_info.StoreSalesRuleData}).appendTo(a.find("#link_param_sales_type_show"));
f("shop_name_input");g()}});$(".ui-autocomplete").css("max-height","150px").css("overflow-x","auto")}function f(b){switch(b){case "link_param_shop_type":a.find("#link_param_shop_type").val()==Constant.SHOP_TYPE_STORE?(a.find("#shop_name_show").hide(),e.seller_sub_id=Constant.STORE_SELLER_SUB_ID,e.GetStoreSalesRule(e.seller_sub_id),a.find("#link_param_sales_type_show").empty(),$("#plugin_edit_dialog_store_sales_type_tmpl").tmpl({SalesType:e.link_type_info.StoreSalesRuleData}).appendTo(a.find("#link_param_sales_type_show")),
g()):a.find("#link_param_shop_type").val()==Constant.SHOP_TYPE_SELLERSUB?e.init_sub_rules&&(a.find("#shop_name_show").show(),a.find("#shop_name_input").val(""),e.seller_sub_id=Constant.STORE_SELLER_SUB_ID,e.GetSellerSub(),q(),a.find("#link_param_sales_type_show").empty(),$("#plugin_edit_dialog_store_sales_type_tmpl").tmpl({SalesType:Array({Type:Constant.SALESRULE_NULL,Name:"\u8bf7\u9009\u62e9"})}).appendTo(a.find("#link_param_sales_type_show"))):(a.find("#shop_name_show").hide(),a.find("#shop_name_input").val(""),
e.seller_sub_id>Constant.STORE_SELLER_SUB_ID?(e.GetStoreSalesRule(),a.find("#link_param_sales_type_show").empty(),$("#plugin_edit_dialog_store_sales_type_tmpl").tmpl({SalesType:e.link_type_info.StoreSalesRuleData}).appendTo(a.find("#link_param_sales_type_show")),g()):(e.seller_sub_id=Constant.STORE_SELLER_SUB_ID,a.find("#link_param_sales_type_show").empty(),$("#plugin_edit_dialog_store_sales_type_tmpl").tmpl({SalesType:Array({Type:Constant.SALESRULE_NULL,Name:"\u8bf7\u9009\u62e9"})}).appendTo(a.find("#link_param_sales_type_show"))));
break;case "shop_name_input":a.find("#link_param_sales_type").val(Constant.SALESRULE_NULL)}b=a.find("#link_param_shop_type").val();CheckInput.IsEmpty(b)&&(b=Constant.SHOP_TYPE_SELLERSUB);var c=a.find("#link_param_sales_type").val(),d=a.find("#link_param_sales_show");d.empty();if(c==Constant.SALESRULE_NULL)$("#plugin_edit_dialog_store_sales_tmpl").tmpl({Sales:[]}).appendTo(d);else{for(var f=[],n=0;n<e.link_type_info.StoreSalesRuleData.length;n++)if(e.link_type_info.StoreSalesRuleData[n].Type==c)for(var h=
0;h<e.link_type_info.StoreSalesRuleData[n].Rule.length;h++)b==Constant.SHOP_TYPE_STORE?e.link_type_info.StoreSalesRuleData[n].Rule[h].SellerSubId==Constant.STORE_SELLER_SUB_ID&&f.push(e.link_type_info.StoreSalesRuleData[n].Rule[h]):b==Constant.SHOP_TYPE_SELLERSUB&&e.link_type_info.StoreSalesRuleData[n].Rule[h].SellerSubId!=Constant.STORE_SELLER_SUB_ID&&e.link_type_info.StoreSalesRuleData[n].Rule[h].SellerSubId==e.seller_sub_id&&f.push(e.link_type_info.StoreSalesRuleData[n].Rule[h]);$("#plugin_edit_dialog_store_sales_tmpl").tmpl({Sales:f}).appendTo(d)}}
function m(){var b=a.find("#tag_class").find("option:selected").val();a.find("#tag_item").empty();0<=b?$("#plugin_edit_dialog_tag_item_tmpl").tmpl(e.link_type_info.TagClass[b]).appendTo(a.find("#tag_item")):$("#plugin_edit_dialog_tag_item_tmpl").tmpl(null).appendTo(a.find("#tag_item"))}var e=this;e.seller_sub_id=c;$("#plugin_edit_dialog_link_param_tmpl").tmpl({link_data:b,opts:e.opts}).appendTo(a);$("#plugin_edit_dialog_store_news_tmpl").tmpl({News:e.link_type_info.StoreNews}).appendTo(a.find("#link_param_news_show"));
b.LinkType==Constant.LINK_TYPE_NEWS&&a.find("#link_param_news").val(b.LinkParam);c=e.link_type_info.StorePage;$("#plugin_edit_dialog_store_page_tmpl").tmpl({Pages:c}).appendTo(a.find("#link_param_page_show"));b.LinkType==Constant.LINK_TYPE_PAGE&&a.find("#link_param_page").val(b.LinkParam);var k={};k.nav_class1=store_nav_data.store_nav.StoreNavClass1;$("#plugin_edit_dialog_class1_tmpl").tmpl(k).appendTo(a.find("#class1_select"));$("#plugin_edit_dialog_class2_tmpl").tmpl(k).appendTo(a.find("#class2_select"));
$("#plugin_edit_dialog_class3_tmpl").tmpl(k).appendTo(a.find("#class3_select"));a.find("#class1_select").change(function(){d()});a.find("#class2_select").change(function(){n()});if(b.LinkType==Constant.LINK_TYPE_CLASS)try{var p=$.parseJSON(b.LinkParam);if(0<p.class1_id){var h=a.find("#class1_select option[class_id="+p.class1_id+"]").val();a.find("#class1_select").val(h);d()}if(0<p.class2_id){var l=a.find("#class2_select option[class_id="+p.class2_id+"]").val();a.find("#class2_select").val(l);n()}if(0<
p.class3_id){var u=a.find("#class3_select option[class_id="+p.class3_id+"]").val();a.find("#class3_select").val(u)}}catch(w){}if(b.LinkType==Constant.LINK_TYPE_SALES)try{var r=$.parseJSON(b.LinkParam);CheckInput.IsNumber(r)||-1==r?(a.find("#shop_name_show").hide(),a.find("#link_param_shop_type").val(Constant.SHOP_TYPE_STORE),e.seller_sub_id=Constant.STORE_SELLER_SUB_ID,e.GetStoreSalesRule(e.seller_sub_id)):r.seller_sub_id==Constant.STORE_SELLER_SUB_ID||null==r.seller_sub_id||!1==e.opts.store_info.multiuser_support?
(a.find("#shop_name_show").hide(),a.find("#link_param_shop_type").val(Constant.SHOP_TYPE_STORE),e.seller_sub_id=Constant.STORE_SELLER_SUB_ID,e.GetStoreSalesRule(e.seller_sub_id)):(a.find("#shop_name_show").show(),a.find("#link_param_shop_type").val(Constant.SHOP_TYPE_SELLERSUB),a.find("#shop_name_input").val(r.seller_sub_name),e.seller_sub_id=r.seller_sub_id,e.GetStoreSalesRule(e.seller_sub_id),e.GetSellerSub(),q(),e.init_sub_rules=!1)}catch(x){}a.find("#link_param_sales_type_show").empty();$("#plugin_edit_dialog_store_sales_type_tmpl").tmpl({SalesType:e.link_type_info.StoreSalesRuleData}).appendTo(a.find("#link_param_sales_type_show"));
a.find("#link_param_sales_show").empty();$("#plugin_edit_dialog_store_sales_tmpl").tmpl({Sales:null}).appendTo(a.find("#link_param_sales_show"));a.find("#link_param_shop_type").change(function(){e.init_sub_rules=!0;f("link_param_shop_type")});f("link_param_shop_type");g();a.find("#tag_class").change(function(){m()});$("#plugin_edit_dialog_tag_class_tmpl").tmpl(e.link_type_info).appendTo(a.find("#tag_class"));m();if(b.LinkType==Constant.LINK_TYPE_TAGITEM)try{for(var s=b.LinkParam,p=0;p<e.link_type_info.TagClass.length;p++)for(h=
0;h<e.link_type_info.TagClass[p].TagItem.length;h++)e.link_type_info.TagClass[p].TagItem[h].TagItemId==s&&(a.find("#tag_class").val(p),m(),a.find("#tag_item").val(s))}catch(t){}$("#plugin_edit_dialog_seller_sub_tmpl").tmpl(e.link_type_info).appendTo(a.find("#link_param_seller_sub_show"));b.LinkType==Constant.LINK_TYPE_SELLER_SUB&&a.find("#link_param_seller_sub").val(b.LinkParam);if(b.LinkType==Constant.LINK_TYPE_SALES)if(r=$.parseJSON(b.LinkParam),b=!1,CheckInput.IsNumber(r)||-1==r)for(p=1;p<e.link_type_info.StoreSalesRuleData.length;p++){for(h=
0;h<e.link_type_info.StoreSalesRuleData[p].Rule.length;h++)if(e.link_type_info.StoreSalesRuleData[p].Rule[h].Id==r||-1==r){a.find("#link_param_sales_type").val(e.link_type_info.StoreSalesRuleData[p].Type);f("link_param_sales_type");a.find("#link_param_sales").val(r);b=!0;break}if(b)break}else if(a.find("#link_param_shop_type").val()==Constant.STORE_SELLER_SUB_ID)for(p=1;p<e.link_type_info.StoreSalesRuleData.length;p++){for(h=0;h<e.link_type_info.StoreSalesRuleData[p].Rule.length;h++){if(-1==r.sales_id){a.find("#link_param_sales_type").val(r.sales_type);
f("link_param_sales_type");b=!0;break}if(e.link_type_info.StoreSalesRuleData[p].Rule[h].Id==r.sales_id){a.find("#link_param_sales_type").val(e.link_type_info.StoreSalesRuleData[p].Type);f("link_param_sales_type");a.find("#link_param_sales").val(r.sales_id);b=!0;break}}if(b)break}else if(null!=e.sell_sub_rules&&void 0!=e.sell_sub_rules)for(p=1;p<e.sell_sub_rules.length;p++){for(h=0;h<e.sell_sub_rules[p].Rule.length;h++){if(-1==r.sales_id){a.find("#link_param_sales_type").val(r.sales_type);f("link_param_sales_type");
b=!0;break}if(e.sell_sub_rules[p].Rule[h].Id==r.sales_id){a.find("#link_param_sales_type").val(e.sell_sub_rules[p].Type);f("link_param_sales_type");a.find("#link_param_sales").val(r.sales_id);b=!0;break}}if(b)break}},init_o2o_link_type:function(a,b){function c(b){ajax_path(n.opts.action_path.GetO2OGoods,{id:b},function(b){b.success&&(a.find("#link_param_o2o_goods_show").empty(),$("#plugin_edit_o2o_select_goods_detail_tmpl").tmpl(b.goods).appendTo(a.find("#link_param_o2o_goods_show")),a.find("#link_param_o2o_goods_id").val(b.goods.GoodsId))})}
function d(b){ajax_path(n.opts.action_path.GetO2OShop,{id:b},function(b){b.success&&(a.find("#link_param_o2o_shop_show").empty(),$("#plugin_edit_o2o_select_shop_detail_tmpl").tmpl(b.shop).appendTo(a.find("#link_param_o2o_shop_show")),a.find("#link_param_o2o_shop_id").val(b.shop.ShopId))})}var n=this;$("#plugin_edit_dialog_o2o_link_param_tmpl").tmpl({link_data:b,opts:n.opts}).appendTo(a);$("#plugin_edit_dialog_store_news_tmpl").tmpl({News:n.link_type_info.StoreNews}).appendTo(a.find("#link_param_news_show"));
b.LinkType==Constant.LINK_TYPE_NEWS&&a.find("#link_param_news").val(b.LinkParam);var g=n.link_type_info.StorePage;$("#plugin_edit_dialog_store_page_tmpl").tmpl({Pages:g}).appendTo(a.find("#link_param_page_show"));b.LinkType==Constant.LINK_TYPE_PAGE&&a.find("#link_param_page").val(b.LinkParam);b.LinkType==Constant.LINK_TYPE_O2O_GOODS&&null!=b.LinkParam&&0<b.LinkParam&&c(b.LinkParam);a.find("#link_param_o2o_goods_select").click(function(){var a=$("#select_o2o_goods_dialog");a.empty();var b=new SelectGoodsDialog(a,
!1,!0);a.dialog({title:"\u9009\u62e9\u5546\u54c1",autoOpen:!1,modal:!0,resizable:!1,width:1E3});a.dialog("open");a.parent().find(".ui-dialog-buttonpane button").eq(0).focus();a.find("#add_goods_cancel").click(function(){a.dialog("close")});a.find("#add_goods_save").click(function(){var g=b.get_checked_id();0<g.length?(a.dialog("close"),c(g[0])):alert("\u8bf7\u9009\u62e9\u4e00\u4e2a\u5546\u54c1")})});b.LinkType==Constant.LINK_TYPE_O2O_SHOP&&null!=b.LinkParam&&0<b.LinkParam&&d(b.LinkParam);a.find("#link_param_o2o_shop_select").click(function(){var a=
$("#select_o2o_shop_dialog");a.empty();var b=new SelectShopDialog(a,!1);a.dialog({title:"\u9009\u62e9\u95e8\u5e97",autoOpen:!1,modal:!0,resizable:!1,width:1E3});a.dialog("open");a.parent().find(".ui-dialog-buttonpane button").eq(0).focus();a.find("#add_shop_cancel").click(function(){a.dialog("close")});a.find("#add_shop_save").click(function(){var c=b.get_checked_id();0<c.length?(a.dialog("close"),d(c[0])):alert("\u8bf7\u9009\u62e9\u4e00\u4e2a\u95e8\u5e97")})});$("#plugin_edit_dialog_o2o_shop_class_tmpl").tmpl({O2OShopClass:n.link_type_info.O2OShopClass}).appendTo(a.find("#link_param_o2o_shop_class_show"));
b.LinkType==Constant.LINK_TYPE_O2O_SHOP_CLASS&&a.find("#link_param_o2o_shop_class").val(b.LinkParam);$("#plugin_edit_dialog_o2o_goods_class_tmpl").tmpl({O2OGoodsClass:n.link_type_info.O2OGoodsClass}).appendTo(a.find("#link_param_o2o_goods_class_show"));b.LinkType==Constant.LINK_TYPE_O2O_GOODS_CLASS&&a.find("#link_param_o2o_goods_class").val(b.LinkParam)},check_input_link_type:function(a,b){var c={result:!1,link_param:"",error_field:null,error_str:""};switch(b){case Constant.LINK_TYPE_NONE:case Constant.LINK_TYPE_NEWS_NONE:break;
case Constant.LINK_TYPE_NEWS:c.link_param=a.find("#link_param_news").find("option:selected").val();break;case Constant.LINK_TYPE_URL:c.link_param=$.trim(a.find("#link_param_extern_url").val());c.link_param.length>Constant.INPUT_PLUGIN_LINK_PARAM_MAX?(c.error_field=a.find("#link_param_extern_url"),c.error_str="\u5916\u90e8URL\u6700\u5927\u4e0d\u80fd\u8d85\u8fc7"+Constant.INPUT_PLUGIN_LINK_PARAM_MAX+"\u5b57"):0>=c.link_param.length?(c.error_field=a.find("#link_param_extern_url"),c.error_str="\u8bf7\u8f93\u5165\u5916\u90e8URL"):
(a.find("#link_param_extern_url").val(c.link_param),CheckInput.IsUrl($.trim(c.link_param))?c.link_param="http://"+c.link_param.substr(7):c.link_param="http://"+c.link_param);break;case Constant.LINK_TYPE_SEARCH:c.link_param=$.trim(a.find("#link_param_search_key").val());c.link_param.length>Constant.INPUT_PLUGIN_LINK_SEARCH_KEY_MAX?(c.error_field=a.find("#link_param_search_key"),c.error_str="\u641c\u7d22\u5173\u952e\u5b57\u6700\u5927\u4e0d\u80fd\u8d85\u8fc7"+Constant.INPUT_PLUGIN_LINK_SEARCH_KEY_MAX+
"\u5b57"):0>=c.link_param.length?(c.error_field=a.find("#link_param_search_key"),c.error_str="\u8bf7\u8f93\u5165\u641c\u7d22\u5173\u952e\u5b57"):a.find("#link_param_search_key").val(c.link_param);break;case Constant.LINK_TYPE_CLASS:var d={};d.class1_id=a.find("#class1_select").find("option:selected").attr("class_id");d.class2_id=a.find("#class2_select").find("option:selected").attr("class_id");d.class3_id=a.find("#class3_select").find("option:selected").attr("class_id");0>=d.class1_id?(c.error_field=
a.find("#class1_select"),c.error_str="\u8bf7\u9009\u62e9\u5546\u54c1\u5206\u7c7b"):c.link_param=stringify(d);break;case Constant.LINK_TYPE_PAGE:c.link_param=a.find("#link_param_page").find("option:selected").val();break;case Constant.LINK_TYPE_SALES:d={};d.sales_type=a.find("#link_param_sales_type").find("option:selected").val();d.sales_id=null==a.find("#link_param_sales").find("option:selected").val()?-1:a.find("#link_param_sales").find("option:selected").val();d.seller_sub_name=null==a.find("#shop_name_input").val()?
"":a.find("#shop_name_input").val();d.seller_sub_id=this.seller_sub_id;if(d.sales_type<Constant.SALESRULE_NULL){c.error_field=a.find("#link_param_sales_type");c.error_str="\u8bf7\u9009\u62e9\u4fc3\u9500\u7c7b\u578b";break}var n=a.find("#link_param_shop_type").val();switch(parseInt(n)){case Constant.SHOP_TYPE_STORE:d.seller_sub_name="";d.seller_sub_id=Constant.STORE_SELLER_SUB_ID;break;case Constant.SHOP_TYPE_SELLERSUB:CheckInput.IsEmpty(d.seller_sub_name)||CheckInput.IsEmpty(d.seller_sub_id)?(c.error_field=
a.find("#shop_name_input"),c.error_str="\u8bf7\u586b\u5199\u6b63\u786e\u7684\u5165\u9a7b\u5546\u5bb6"):(n=this.GetSellerSubId(d.seller_sub_name),d.seller_sub_id!=n&&(c.error_field=a.find("#shop_name_input"),c.error_str="\u8bf7\u586b\u5199\u6b63\u786e\u7684\u5165\u9a7b\u5546\u5bb6"))}c.link_param=stringify(d);break;case Constant.LINK_TYPE_GOODS:break;case Constant.LINK_TYPE_TAGITEM:d=a.find("#tag_item").find("option:selected").val();0<d?c.link_param=d:(c.error_field=a.find("#tag_item"),c.error_str=
"\u8bf7\u9009\u62e9\u6807\u7b7e\u9879\u76ee");break;case Constant.LINK_TYPE_SELLER_SUB:d=a.find("#link_param_seller_sub").find("option:selected").val();CheckInput.IsEmpty(d)?(c.error_field=a.find("#link_param_seller_sub"),c.error_str="\u8bf7\u9009\u62e9\u5165\u9a7b\u65d7\u8230\u5e97"):c.link_param=d;break;case Constant.LINK_TYPE_O2O_GOODS:d=a.find("#link_param_o2o_goods_id").val();CheckInput.IsEmpty(d)?(c.error_field=a.find("#link_param_o2o_goods_id"),c.error_str="\u8bf7\u9009\u62e9\u5546\u54c1"):
c.link_param=d;break;case Constant.LINK_TYPE_O2O_GOODS_CLASS:d=a.find("#link_param_o2o_goods_class").find("option:selected").val();0<d?c.link_param=d:(c.error_field=a.find("#link_param_o2o_goods_class"),c.error_str="\u8bf7\u9009\u62e9\u5546\u54c1\u5206\u7c7b");break;case Constant.LINK_TYPE_O2O_SHOP:d=a.find("#link_param_o2o_shop_id").val();CheckInput.IsEmpty(d)?(c.error_field=a.find("#link_param_o2o_shop_id"),c.error_str="\u8bf7\u9009\u62e9\u95e8\u5e97"):c.link_param=d;break;case Constant.LINK_TYPE_O2O_SHOP_CLASS:d=
a.find("#link_param_o2o_shop_class").find("option:selected").val();0<d?c.link_param=d:(c.error_field=a.find("#link_param_o2o_shop_class"),c.error_str="\u8bf7\u9009\u62e9\u95e8\u5e97\u6240\u5c5e");break;case Constant.LINK_TYPE_O2O_SALES:d=a.find("#link_param_o2o_sales").val();0<=d?c.link_param=d:(c.error_field=a.find("#link_param_o2o_sales"),c.error_str="\u8bf7\u9009\u62e9\u5546\u54c1\u7c7b\u578b");break;case Constant.LINK_TYPE_NEWS_NONE:break;default:c.error_field=a,c.error_str="\u975e\u6cd5\u7684\u9009\u9879"}CheckInput.IsEmpty(c.error_field)?
c.result=!0:c.result=!1;return c},GetSellerSub:function(){var a=this;null==istore_plugin_seller_sub_list_data?ajax_path(a.opts.action_path.SearchStore,{option:{First:-1,Max:-1}},function(b){istore_plugin_seller_sub_list_data=[];for(var c=0;c<b.seller_sub.length;c++){var d={};d.name=b.seller_sub[c].Name;d.id=b.seller_sub[c].SubId;istore_plugin_seller_sub_list_data.push(d)}a.storelist=$.extend(!0,[],istore_plugin_seller_sub_list_data)},!1):a.storelist=$.extend(!0,[],istore_plugin_seller_sub_list_data)},
GetStoreSalesRule:function(a){var b=this,c={};c.SellerSubId=a;c.IsAvail=!0;ajax_path(b.opts.action_path.SalesRuleSearch,{option:c},function(a){b.link_type_info.StoreSalesRule=a.RuleList;b.link_type_info.StoreSalesRuleData=[];b.link_type_info.StoreSalesRuleData.push({Type:Constant.SALESRULE_NULL,Name:"\u8bf7\u9009\u62e9"});b.link_type_info.StoreSalesRuleData[0].Rule=[];for(var c=0;c<b.link_type_info.StoreSalesRule.length;c++){b.link_type_info.StoreSalesRule[c].Displayinfo=get_sales_rule_displayinfo(b.link_type_info.StoreSalesRule[c]);
b.link_type_info.StoreSalesRuleData[0].Rule.push(b.link_type_info.StoreSalesRule[c]);for(var g=!1,q=b.link_type_info.StoreSalesRule[c].Type,f=0;f<b.link_type_info.StoreSalesRuleData.length;f++)if(q==b.link_type_info.StoreSalesRuleData[f].Type){g=!0;b.link_type_info.StoreSalesRuleData[f].Rule.push(b.link_type_info.StoreSalesRule[c]);break}if(!g){g="";switch(q){case Constant.SALESRULE_REDUCE:g="\u76f4\u964d";break;case Constant.SALESRULE_TIME_TO_REDUCE:g="\u9650\u65f6\u4f18\u60e0";break;case Constant.SALESRULE_FULL_REDUCE:g=
"\u6ee1\u51cf";break;case Constant.SALESRULE_GROUP_BUY:g="\u56e2\u8d2d";break;case Constant.SALESRULE_PACK_BUY:g="\u7ec4\u5408\u8d2d\u4e70";break;case Constant.SALESRULE_SECKILLING:g="\u79d2\u6740";break;case Constant.SALESRULE_DEFINE:g="\u81ea\u5b9a\u4e49";break;case Constant.SALESRULE_DISCOUNT:g="\u6298\u6263";break;case Constant.SALESRULE_FULL_CUT:g="\u6279\u53d1"}b.link_type_info.StoreSalesRuleData.push({Type:q,Name:g});b.link_type_info.StoreSalesRuleData[b.link_type_info.StoreSalesRuleData.length-
1].Rule=[];b.link_type_info.StoreSalesRuleData[b.link_type_info.StoreSalesRuleData.length-1].Rule.push(b.link_type_info.StoreSalesRule[c])}}0<a.RuleList.length&&a.RuleList[0].SellerSubId>Constant.STORE_SELLER_SUB_ID&&(b.sell_sub_rules=b.link_type_info.StoreSalesRuleData)},!1)},GetSellerSubId:function(a){for(var b=0;b<this.storelist.length;b++)if(this.storelist[b].name==a)return this.storelist[b].id},get_preview_position:function(a,b,c){a=0==a?{w:this.frame.width(),h:this.frame.height()}:this.get_parts_size(a);
a=a.w/a.h;var d={};a>b/c?(d.w=b,d.h=b/a,d.x=0,d.y=(c-d.h)/2):(d.w=b*a,d.h=c,d.x=(b-d.w)/2,d.y=0);return d},canvas_preview:function(a){var b=this.get_preview_position(0,a.width(),a.height());a.empty();var c=$("<div></div>");c.width(b.w);c.height(b.h);c.css("margin-left",b.x+"px");c.css("margin-top",b.y+"px");c.appendTo(a);this.preview(c,b.w,b.h)},preview:function(a,b,c){var d=this.body.width(),n=this.body.height();if(null==b||null==c)b=d,c=n;c=$.extend(!0,{},this);c.show_mode=PluginConstant.SHOW_MODE_PREVIEW;
null==a?($("#plugin_preview_dialog").empty(),$("#plugin_preview_dialog_tmpl").tmpl(null).appendTo("#plugin_preview_dialog"),$("#plugin_preview_dialog").dialog({autoOpen:!1,resizable:!1,modal:!0,width:d,height:n+85,title:"\u9884\u89c8"}),$("#plugin_preview_dialog").dialog("open")):$(a).empty();c.frame=$('<div class="plugin_containers"></div>');c.body=$('<div style="overflow:hidden;"></div>');c.body.appendTo(c.frame);c.body.width(d);c.body.height(n);c.frame.width(d);c.frame.height(n);c.frame.css("position",
"relative");c.frame.css("top","0px");c.frame.css("left","0px");null==a?(c.frame.appendTo($("#plugin_preview_dialog").dialog("widget").find(".plugin_preview_content")),$("#plugin_preview_dialog").dialog("widget").find("#button_close").click(function(){$("#plugin_preview_dialog").dialog("close")})):c.frame.appendTo($(a));d!=b&&(a=b/d,$.support.leadingWhitespace?(c.frame.css("transform","scale("+a+")"),c.frame.css("transform-origin","top left"),c.frame.css("-ms-transform","scale("+a+")"),c.frame.css("-ms-transform-origin",
"top left"),c.frame.css("-o-transform","scale("+a+")"),c.frame.css("-o-transform-origin","top left"),c.frame.css("-moz-transform","scale("+a+")"),c.frame.css("-moz-transform-origin","top left"),c.frame.css("-webkit-transform","scale("+a+")"),c.frame.css("-webkit-transform-origin","top left")):c.frame.css("zoom",a));c.show_data()}};function plugin_setting(a){if(!$(a.target).hasClass("plugin_touch_cancel")&&!$(a.target).parents().hasClass("plugin_touch_cancel"))a.data.on_setting()};var iStoreStatic=function(a,b,c){this.istore_option=a;this.plugin_option=b;this.plugins=[];this.frame=$(c)};
iStoreStatic.prototype={show_store_display:function(){var a=this;this.frame.find(".plugin_containers").each(function(){var b=$(this);setTimeout(function(){var c=Number(b.attr("plugin_type")),d=Number(b.attr("layout_id")),n=Number(b.attr("x")),g=Number(b.attr("y")),q=Number(b.attr("cx")),f=Number(b.attr("cy")),m={};m.ShowTitle=Number(b.attr("plugin_data_show_title"));m.Style=Number(b.attr("plugin_data_style"));m.Type=Number(b.attr("plugin_data_type"));switch(c){case Constant.PLUGIN_TYPE_ADVERTISING:var e=
b.find(".plugin_advertising_content");m.Interval=e.attr("Interval");m.Direction=e.attr("Direction");break;case Constant.PLUGIN_TYPE_CAROUSEL:e=b.find(".plugin_carousel_content");m.Setting={};m.Setting.ShowNumber=e.attr("ShowNumber");m.Setting.Interval=e.attr("Interval");m.Setting.Direction=e.attr("Direction");m.Setting.Gap=e.attr("Gap");m.Setting.ShowText=e.attr("ShowText");break;case Constant.PLUGIN_TYPE_NEWS_TEXT:case Constant.PLUGIN_TYPE_NEWS_GRAPHIC:e=b.find(".plugin_news_main_content");m.Roll=
"True"==e.attr("Roll")||"true"==e.attr("Roll");m.Interval=e.attr("Interval");m.Direction=e.attr("Direction");break;case Constant.PLUGIN_TYPE_SHOWCASE1:case Constant.PLUGIN_TYPE_SHOWCASE2:case Constant.PLUGIN_TYPE_SHOWCASE3:case Constant.PLUGIN_TYPE_SUB_SHOWCASE1:case Constant.PLUGIN_TYPE_SUB_SHOWCASE2:e=b.find(".showcase_main_content");m.GoodsStyle=e.attr("GoodsStyle");m.Roll="True"==e.attr("Roll")||"true"==e.attr("Roll");m.Interval=e.attr("Interval");m.Direction=e.attr("Direction");m.ArrowStyle=
e.attr("ArrowStyle");m.IsManualRoll="True"==e.attr("IsManualRoll")||"true"==e.attr("IsManualRoll");m.IsShowCart=e.attr("IsShowCart");m.CartStyle=e.attr("CartStyle");break;case Constant.PLUGIN_TYPE_HEADER:e=b.find(".plugin_header_content");m.SearchType=e.attr("SearchType");m.NavType=e.attr("NavType");m.SearchRemind=e.attr("SearchRemind");break;case Constant.PLUGIN_TYPE_SUB_STORE_LIST:e=b.find(".plugin_sub_store_list_box");m.Roll="True"==e.attr("Roll")||"true"==e.attr("Roll");m.Interval=e.attr("Interval");
m.Direction=e.attr("Direction");break;case Constant.PLUGIN_TYPE_STORE_POSITION:e=b.find(".plugin_store_logon_content_box");m.Latitude=e.attr("Latitude");m.Longitude=e.attr("Longitude");m.PosZoom=e.attr("PosZoom");m.PosTitle=e.attr("PosTitle");m.PosContent=e.attr("PosContent");break;case Constant.PLUGIN_TYPE_SUB_STORE_MAP:m=plugin_sub_store_map_runtime_data}a.add_plugin_layout(d,c,n,g,q,f,m)},2)})},add_plugin_layout:function(a,b,c,d,n,g,q){b=this.add_plugin(b);b.plugin_id=-1;b.layout_id=a;b.grid_x=
c;b.grid_y=d;b.grid_cx=n;b.grid_cy=g;b.data=q;b.is_new=!1;b.frame.remove();b.frame=this.frame.find(".plugin_containers[layout_id="+a+"]");b.body=b.frame.find(".plugin_body");b.plugin_type!=Constant.PLUGIN_TYPE_NAV_ALL&&b.plugin_type!=Constant.PLUGIN_TYPE_NAV_SELLERSUB_ALL||b.get_body().css("z-index",10);this.plugins.push(b);b.show_normal();b.show();b.show_data()},add_plugin:function(a){for(var b=this,c=null,d=0;d<this.plugin_option.length;d++)if(this.plugin_option[d].plugin_type==a){c=$.extend(!0,
{store_info:this.istore_option.store_info,action_path:this.istore_option.action_path},this.plugin_option[d]);break}null==c&&(c={plugin_type:a,content:"<div></div>",icon:"<div></div>",tools_bar:$("<div></div>"),on_show:null,on_sized:null});a=$.extend(!0,{},c,{plugin_type:a,show_mode:PluginConstant.SHOW_MODE_STATIC,frame_config:this.istore_option.frame_config,icon:"<div></div>",content:$("<div></div>"),tools_bar:$("<div></div>"),tools_show_resize:!1,page_id:this.istore_option.page_id,containers:this.store_containers,
on_remove:function(a){b.on_remove(a)}});return new iStorePlugin(a)},on_remove:function(a){},on_moved:function(a,b,c){},on_sized:function(a,b,c){}};var plugin_icon_advertising=getContentPath("Content/Admin/images/icon_01.png"),plugin_icon_image=getContentPath("Content/Admin/images/icon_02.png"),plugin_icon_showcase1=getContentPath("Content/Admin/images/icon_05.png"),plugin_icon_showcase2=getContentPath("Content/Admin/images/icon_06.png"),plugin_icon_showcase3=getContentPath("Content/Admin/images/icon_07.png"),plugin_icon_sub_showcase1=getContentPath("Content/Admin/images/icon_24.png"),plugin_icon_sub_showcase2=getContentPath("Content/Admin/images/icon_25.png"),
plugin_icon_nav_all=getContentPath("Content/Admin/images/icon_08.png"),plugin_icon_nav_v=getContentPath("Content/Admin/images/icon_09.png"),plugin_icon_nav_h=getContentPath("Content/Admin/images/icon_09.png"),plugin_icon_nav_tag=getContentPath("Content/Admin/images/icon_13.png"),plugin_icon_nav_sellersub_all=getContentPath("Content/Admin/images/icon_20.png"),plugin_icon_nav_sellersub_v=getContentPath("Content/Admin/images/icon_21.png"),plugin_icon_news_text=getContentPath("Content/Admin/images/icon_03.png"),
plugin_icon_news_graphic=getContentPath("Content/Admin/images/icon_04.png"),plugin_icon_free=getContentPath("Content/Admin/images/icon_10.png"),plugin_icon_message=getContentPath("Content/Admin/images/icon_11.png"),plugin_icon_coupon=getContentPath("Content/Admin/images/icon_16.png"),plugin_icon_carousel=getContentPath("Content/Admin/images/icon_12.png"),plugin_icon_store_logon=getContentPath("Content/Admin/images/icon_17.png"),plugin_icon_sub_store=getContentPath("Content/Admin/images/icon_18.png"),
plugin_icon_sub_store_list=getContentPath("Content/Admin/images/icon_19.png"),plugin_icon_store_position=getContentPath("Content/Admin/images/icon_22.png"),plugin_icon_sub_store_map=getContentPath("Content/Admin/images/icon_23.png"),istore_option={selector:"#store_containers",page_id:0,move_margin:0,size_margin:-10,frame_config:Constant.ISTORE_FRAME_CONFIG_PC_STYLE_B2C,on_sized:function(a,b){$(".contentmainbox").height(b)},store_info:{multiuser_support:!1,seller_sub_id:Constant.STORE_SELLER_SUB_ID},
action_path:{admin_type:"admin",GetPhoto:getActionPath("GetPhoto","AdminOperation"),CorpPhoto:getActionPath("CorpPhoto","AdminOperation"),CopyAsTempPhoto:getActionPath("CopyAsTempPhoto","AdminOperation"),UploadTempPhoto:getActionPath("UploadTempPhoto","AdminOperation"),GetFolderList:getActionPath("GetFolderList","AdminOperation"),UploadPhoto:getActionPath("UploadPhoto","AdminOperation"),KindFileManager:getActionPath("KindFileManager","AdminOperation"),GetStoreLayout:getActionPath("GetStoreLayout",
"Store"),UpdateStoreLayout:getActionPath("UpdateStoreLayout","Store"),AddStoreLayout:getActionPath("AddStoreLayout","Store"),DeleteStoreLayout:getActionPath("DeleteStoreLayout","Store"),GetStoreLinkType:getActionPath("GetStoreLinkType","Store"),GetAdvertising:getActionPath("GetAdvertising","Store"),EditAdvertising:getActionPath("EditAdvertising","Store"),GetPluginButton:getActionPath("GetPluginButton","Store"),EditPluginButton:getActionPath("EditPluginButton","Store"),GetPluginStoreCoupon:getActionPath("GetPluginStoreCoupon",
"Store"),EditPluginStoreCoupon:getActionPath("EditPluginStoreCoupon","Store"),GetStoreFree:getActionPath("GetStoreFree","Store"),EditStoreFree:getActionPath("EditStoreFree","Store"),GetPluginHeader:getActionPath("GetPluginHeader","Store"),EditPluginHeader:getActionPath("EditPluginHeader","Store"),GetPluginStoreMessage:getActionPath("GetPluginStoreMessage","Store"),EditPluginStoreMessage:getActionPath("EditPluginStoreMessage","Store"),GetStoreNavigation:getActionPath("GetStoreNavigation","Store"),
EditStoreNavigation:getActionPath("EditStoreNavigation","Store"),GetNewsGroup:getActionPath("GetNewsGroup","Store"),GetNews:getActionPath("GetNews","Store"),EditNewsGroup:getActionPath("EditNewsGroup","Store"),GetShowcase:getActionPath("GetShowcase","Store"),EditShowcase:getActionPath("EditShowcase","Store"),GetPluginStoreLogon:getActionPath("GetPluginStoreLogon","Store"),EditPluginStoreLogon:getActionPath("EditPluginStoreLogon","Store"),GetPluginSubStore:getActionPath("GetPluginSubStore","Store"),
EditPluginSubStore:getActionPath("EditPluginSubStore","Store"),GetPluginSubStoreList:getActionPath("GetPluginSubStoreList","Store"),EditPluginSubStoreList:getActionPath("EditPluginSubStoreList","Store"),GetPluginStorePosition:getActionPath("GetPluginStorePosition","Store"),EditPluginStorePosition:getActionPath("EditPluginStorePosition","Store"),GetPluginSubStoreMap:getActionPath("GetPluginSubStoreMap","Store"),EditPluginSubStoreMap:getActionPath("EditPluginSubStoreMap","Store"),GetSimpleSellerSubFromId:getActionPath("GetSimpleSellerSubFromId",
"Store"),GetTagClass:getActionPath("GetTagClass","Goods"),SearchGoods:getActionPath("SearchGoods","Goods"),SearchClassGoods:getActionPath("SearchClassGoods","Goods"),SearchStore:getActionPath("SearchStore","Store"),SalesRuleSearch:getActionPath("SalesRuleSearch","AdminOperation"),SearchSalesGoods:getActionPath("SearchSalesGoods","Goods")}},plugin_option=[{plugin_type:Constant.PLUGIN_TYPE_ADVERTISING,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u5e7f\u544a\u8f6e\u64ad" src="'+
plugin_icon_advertising+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_advertising+')"></div>',tools_bar:".toolbarbg #plugin_type0",grid_cx_init:1,grid_cy_init:4,on_get_parts_size:parts_size_advertising,on_show:show_advertising,on_sized:size_advertising},{plugin_type:Constant.PLUGIN_TYPE_IMAGE,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u56fe\u7247\u5c55\u793a" src="'+plugin_icon_image+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_image+
')"></div>',tools_bar:".toolbarbg #plugin_type1",grid_cx_init:1,grid_cy_init:4,on_get_parts_size:parts_size_image,on_show:show_image,on_sized:size_image},{plugin_type:Constant.PLUGIN_TYPE_SHOWCASE1,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u5355\u6807\u7b7e\u6a71\u7a97" src="'+plugin_icon_showcase1+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_showcase1+')"></div>',tools_bar:".toolbarbg #plugin_type2",grid_cx_init:1,grid_cy_init:6,on_get_right_size:right_size_showcase_type0,
on_show:show_showcase_type0,on_sized:size_showcase_type0},{plugin_type:Constant.PLUGIN_TYPE_SHOWCASE2,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u591a\u6807\u7b7e\u6a71\u7a97" src="'+plugin_icon_showcase2+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_showcase2+')"></div>',tools_bar:".toolbarbg #plugin_type3",grid_cx_init:1,grid_cy_init:6,on_get_right_size:right_size_showcase_type1,on_show:show_showcase_type1,on_sized:size_showcase_type1},{plugin_type:Constant.PLUGIN_TYPE_SHOWCASE3,
plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u4fa7\u680f\u6a71\u7a97" src="'+plugin_icon_showcase3+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_showcase3+')"></div>',tools_bar:".toolbarbg #plugin_type4",grid_cx_init:1,grid_cy_init:3,on_get_right_size:right_size_showcase_type2,on_show:show_showcase_type2,on_sized:size_showcase_type2},{plugin_type:Constant.PLUGIN_TYPE_SUB_SHOWCASE1,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u5355\u6807\u7b7e\u5546\u5bb6\u6a71\u7a97" src="'+
plugin_icon_sub_showcase1+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_sub_showcase1+')"></div>',tools_bar:".toolbarbg #plugin_type24",grid_cx_init:1,grid_cy_init:6,on_get_right_size:right_size_showcase_type0,on_show:show_sub_showcase_type0,on_sized:size_sub_showcase_type0},{plugin_type:Constant.PLUGIN_TYPE_SUB_SHOWCASE2,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u591a\u6807\u7b7e\u5546\u5bb6\u6a71\u7a97" src="'+plugin_icon_sub_showcase2+'" /> </div>',
icon:'<div style="background-image:url('+plugin_icon_sub_showcase2+')"></div>',tools_bar:".toolbarbg #plugin_type25",grid_cx_init:1,grid_cy_init:6,on_get_right_size:right_size_showcase_type1,on_show:show_sub_showcase_type1,on_sized:size_sub_showcase_type1},{plugin_type:Constant.PLUGIN_TYPE_NAV_ALL,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u5168\u5206\u7c7b\u5bfc\u822a" src="'+plugin_icon_nav_all+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_nav_all+')"></div>',
tools_bar:".toolbarbg #plugin_type5",grid_cx_init:1,grid_cy_init:8,on_show:show_nav_all,on_sized:size_nav_all},{plugin_type:Constant.PLUGIN_TYPE_NAV_V,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u7eb5\u5411\u5206\u7c7b\u5bfc\u822a" src="'+plugin_icon_nav_v+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_nav_v+')"></div>',tools_bar:".toolbarbg #plugin_type6",grid_cx_init:1,grid_cy_init:4,on_show:show_nav_v,on_sized:size_nav_v},{plugin_type:Constant.PLUGIN_TYPE_NAV_TAG,
plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u6807\u7b7e\u5bfc\u822a" src="'+plugin_icon_nav_tag+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_nav_tag+')"></div>',tools_bar:".toolbarbg #plugin_type13",grid_cx_init:1,grid_cy_init:4,on_show:show_nav_tag,on_sized:size_nav_tag},{plugin_type:Constant.PLUGIN_TYPE_NAV_SELLERSUB_ALL,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u5546\u5bb6\u5168\u5206\u7c7b" src="'+plugin_icon_nav_sellersub_all+
'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_nav_sellersub_all+')"></div>',tools_bar:".toolbarbg #plugin_type20",grid_cx_init:1,grid_cy_init:8,on_show:show_nav_seller,on_sized:size_nav_seller},{plugin_type:Constant.PLUGIN_TYPE_NAV_SELLERSUB_V,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u5546\u5bb6\u7eb5\u5411\u5206\u7c7b" src="'+plugin_icon_nav_sellersub_v+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_nav_sellersub_v+')"></div>',tools_bar:".toolbarbg #plugin_type21",
grid_cx_init:1,grid_cy_init:4,on_show:show_nav_v_seller,on_sized:size_nav_v_seller},{plugin_type:Constant.PLUGIN_TYPE_NEWS_TEXT,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u6587\u5b57\u65b0\u95fb" src="'+plugin_icon_news_text+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_news_text+')"></div>',tools_bar:".toolbarbg #plugin_type8",grid_cx_init:1,grid_cy_init:4,on_show:show_text_news,on_sized:size_text_news},{plugin_type:Constant.PLUGIN_TYPE_NEWS_GRAPHIC,plugin_device:Constant.STORE_DEVICE_PC,
content:'<div><img title="\u56fe\u6587\u65b0\u95fb" src="'+plugin_icon_news_graphic+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_news_graphic+')"></div>',tools_bar:".toolbarbg #plugin_type9",grid_cx_init:1,grid_cy_init:4,on_show:show_graphic_news,on_sized:size_graphic_news},{plugin_type:Constant.PLUGIN_TYPE_FREE,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u81ea\u7531\u7f16\u8f91" src="'+plugin_icon_free+'" /> </div>',icon:'<div style="background-image:url('+
plugin_icon_free+')"></div>',tools_bar:".toolbarbg #plugin_type10",grid_cx_init:1,grid_cy_init:4,on_show:show_free,on_sized:size_free},{plugin_type:Constant.PLUGIN_TYPE_MESSAGE,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u5ba2\u6237\u7559\u8a00" src="'+plugin_icon_message+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_message+')"></div>',tools_bar:".toolbarbg #plugin_type11",grid_cx_init:1,grid_cy_init:5,on_show:show_message,on_sized:size_message},{plugin_type:Constant.PLUGIN_TYPE_CAROUSEL,
plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u56fe\u7247\u6eda\u64ad" src="'+plugin_icon_carousel+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_carousel+')"></div>',tools_bar:".toolbarbg #plugin_type12",grid_cx_init:1,grid_cy_init:4,on_get_parts_size:parts_size_carousel,on_show:show_carousel,on_sized:size_carousel},{plugin_type:Constant.PLUGIN_TYPE_COUPON,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u4f18\u60e0\u5238\u67e5\u8be2" src="'+
plugin_icon_coupon+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_coupon+')"></div>',tools_bar:".toolbarbg #plugin_type16",grid_cx_init:1,grid_cy_init:5,on_show:show_coupon,on_sized:size_coupon},{plugin_type:Constant.PLUGIN_TYPE_STORE_LOGON,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u767b\u5f55\u63d2\u4ef6" src="'+plugin_icon_store_logon+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_store_logon+')"></div>',tools_bar:".toolbarbg #plugin_type17",
grid_cx_init:1,grid_cy_init:2,on_show:show_store_logon,on_sized:size_store_logon},{plugin_type:Constant.PLUGIN_TYPE_SUB_STORE,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u5e97\u94fa\u4fe1\u606f" src="'+plugin_icon_sub_store+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_sub_store+')"></div>',tools_bar:".toolbarbg #plugin_type18",grid_cx_init:1,grid_cy_init:5,on_show:show_sub_store,on_sized:size_sub_store},{plugin_type:Constant.PLUGIN_TYPE_SUB_STORE_LIST,plugin_device:Constant.STORE_DEVICE_PC,
content:'<div><img title="\u5165\u9a7b\u5546\u5bb6" src="'+plugin_icon_sub_store_list+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_sub_store_list+')"></div>',tools_bar:".toolbarbg #plugin_type19",grid_cx_init:1,grid_cy_init:5,on_show:show_sub_store_list,on_sized:size_sub_store_list},{plugin_type:Constant.PLUGIN_TYPE_STORE_POSITION,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u5546\u57ce\u4f4d\u7f6e\u63d2\u4ef6" src="'+plugin_icon_store_position+'" /> </div>',
icon:'<div style="background-image:url('+plugin_icon_store_position+')"></div>',tools_bar:".toolbarbg #plugin_type22",grid_cx_init:1,grid_cy_init:5,on_show:show_store_position,on_sized:size_store_position},{plugin_type:Constant.PLUGIN_TYPE_SUB_STORE_MAP,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u5546\u5bb6\u5730\u56fe" src="'+plugin_icon_sub_store_map+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_sub_store_map+')"></div>',tools_bar:".toolbarbg #plugin_type23",
grid_cx_init:1,grid_cy_init:5,on_show:show_sub_store_map,on_sized:size_sub_store_map}];
function show_title(a){try{if(a.plugin_type==Constant.PLUGIN_TYPE_SHOWCASE2||a.plugin_type==Constant.PLUGIN_TYPE_SUB_SHOWCASE2)a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&$("#showcase_type1_border_tmpl").tmpl(a).appendTo(a.body);else{if(a.show_mode!=PluginConstant.SHOW_MODE_STATIC){if(a.plugin_type==Constant.PLUGIN_TYPE_SHOWCASE1||a.plugin_type==Constant.PLUGIN_TYPE_SUB_SHOWCASE1)CheckInput.IsEmpty(a.data.SearchKey)?a.data.SearchKeyDisplay=[]:a.data.SearchKeyDisplay=$.trim(a.data.SearchKey).split("\t");
$("#plugin_border_tmpl").tmpl(a).appendTo(a.body)}if(a.show_mode==PluginConstant.SHOW_MODE_EDIT&&a.opts.can_setting&&!CheckInput.IsEmpty(a.change_title)){var b=a.body.find(".plugin_title_pic");b.find(".plugin_title").css("cursor","text");b.find(".plugin_title").click(function(){var c=b.find(".plugin_title_input");c.val($(this).text());c.width($(this).width());c.height($(this).height()-6);$(this).hide();c.show();c.focus();c.blur(function(){var n=$.trim(b.find(".plugin_title").text()),g=$.trim($(this).val());
n!=g&&a.change_title(g);c.hide();c.val(n);b.find(".plugin_title").show()});c.keyup(function(a){13==a.keyCode?c.blur():27==a.keyCode&&(c.val(b.find(".plugin_title").text()),c.blur())})})}}}catch(c){}}function get_plugin_inner_size(a){return csharp_get_plugin_size(a.frame_config,a.body.width(),a.body.height(),a.plugin_type,a.data.ShowTitle)}
function set_plugin_boder_size(a){var b=get_plugin_inner_size(a);if(a.plugin_type==Constant.PLUGIN_TYPE_SHOWCASE2)a.body.find(".plugin_title_border").width(b.border_width),a.body.find(".plugin_title_border").height(b.border_height);else switch(a.data.ShowTitle){case 0:a.body.find(".plugin_untitle_noborder").width(b.border_width);a.body.find(".plugin_untitle_noborder").height(b.border_height);break;case 1:a.body.find(".plugin_untitle_border").width(b.border_width);a.body.find(".plugin_untitle_border").height(b.border_height);
break;default:a.body.find(".plugin_title_border").width(b.border_width),a.body.find(".plugin_title_border").height(b.border_height)}a.body.find(".plugin_inner_content").width(b.width);a.body.find(".plugin_inner_content").height(b.height);return b}function show_free(a){try{a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(a.body.empty(),show_title(a),$("#store_free_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content")))}catch(b){}size_free(a)}
function size_free(a){set_plugin_boder_size(a);switch(a.show_mode){case PluginConstant.SHOW_MODE_EDIT:var b=a.body.find(".plugin_inner_content").width(),c=a.body.find(".plugin_inner_content").height();a=a.body.find(".plugin_free_mask");a.width(b);a.height(c);a.css("top","0px");a.css("left","0px");a.show()}}
function show_nav_all(a){try{if(a.show_mode!=PluginConstant.SHOW_MODE_STATIC)switch(a.body.empty(),show_title(a),a.nav_data=a.get_nav_data(),a.data.Style){case 0:$("#store_nav_all_style0_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));break;case 1:$("#store_nav_all_style1_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));break;case 2:$("#store_nav_all_style2_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));break;case 3:$("#store_nav_all_style3_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));
break;case 4:$("#store_nav_all_style4_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"))}switch(a.data.Style){case 1:case 3:case 4:a.body.find(".plugin_title_border").hasClass("Nav_TitleStyleBox")||a.body.find(".plugin_title_border").addClass("Nav_TitleStyleBox")}switch(a.show_mode){case PluginConstant.SHOW_MODE_STATIC:case PluginConstant.SHOW_MODE_DISPLAY:switch(a.data.Style){case 1:var b=480,c=60;a.body.find(".nav_style1_content").css("cursor","default");a.body.find(".nav_style1_content_li").hover(function(){a.body.find(".nav_style1_content_li").removeClass("nav_style1_content_hover");
$(this).addClass("nav_style1_content_hover");var d=a.body.find(".nav_style1_content_li").index(this),g=a.body.find(".nav_style1_sub").eq(d);a.body.find(".nav_style1_sub").hide();g.show();_d=g.find(".nav_style_all_scroll_content");if(_d.height()>b){var q=!0,f=!1,m=null,e;g.find(".nav_style_all_scroll_box").height(b);_d.css("position","absolute");0<_d.height()-b+_d.position().top&&g.find(".next").show();g.find(".next").unbind();g.find(".next").mouseup(function(){f=!1;var a=_d.position().top,c=_d.height()-
b,d=parseInt(c+a);q?(clearInterval(e),65>=d?(g.find(".next").fadeOut(150),_d.animate({top:-c})):_d.animate({top:a-65}),g.find(".prev").is(":hidden")&&g.find(".prev").fadeIn(150)):0>=d&&g.find(".next").fadeOut(150)});g.find(".next").mousedown(function(){_sp=3;_dir="D";f=q=!0;e=setTimeout(function(){k()},180)});g.find(".prev").unbind();g.find(".prev").mouseup(function(){f=!1;var a=_d.position().top;q?(clearInterval(e),65>=Math.abs(a)?(g.find(".prev").fadeOut(150),_d.animate({top:0})):_d.animate({top:a+
65}),g.find(".next").is(":hidden")&&g.find(".next").fadeIn(150)):0>=Math.abs(a)&&g.find(".prev").fadeOut(150)});g.find(".prev").mousedown(function(){_sp=-3;_dir="U";f=q=!0;e=setTimeout(function(){k()},180)});var k=function(){q=!1;var a=_d.position().top,c=_d.height()-b,d=c+a;3<=d&&3<=Math.abs(a)?_d[0].style.top=a-_sp+"px":"D"==_dir?3<=d?(_d[0].style.top=a-_sp+"px",g.find(".prev").is(":hidden")&&g.find(".prev").fadeIn(150)):(_d[0].style.top=-c+"px",f=!1):3<=Math.abs(a)?(_d[0].style.top=a-_sp+"px",
g.find(".next").is(":hidden")&&g.find(".next").fadeIn(150)):(_d[0].style.top="0px",f=!1);f&&(null==m&&(m=arguments.callee),setTimeout(function(){m()},15))}}else g.height()<c&&g.height(c);d=$(this).offset().top-a.body.find(".nav_style1_main_content").offset().top;d+=$(this).height()+10;g.height()<d&&g.css("top",Math.round(d-g.height())+"px")},function(){});a.body.find(".nav_style1_main_content").hover(function(){},function(){a.body.find(".nav_style1_content_li").removeClass("nav_style1_content_hover");
a.body.find(".nav_style1_sub").hide()});break;case 3:a.body.find(".nav_style3_SubClass2_select").hover(function(){var a=$(this).parents(".nav_style1_sub"),b=a.find(".nav_style3_SubClass2_select").index(this);a.find(".icon_arrow_NavClass2").hide();a.find(".nav_style3_SubClass2_select").removeClass("checked");a.find(".nav_style1_sub_class2").hide();$(this).addClass("checked");$(this).find(".icon_arrow_NavClass2").show();a.find(".nav_style1_sub_class2").eq(b).show()},function(){});b=480;c=60;a.body.find(".nav_style1_content").css("cursor",
"default");a.body.find(".nav_style1_content_li").hover(function(){a.body.find(".nav_style1_content_li").removeClass("nav_style1_content_hover1");$(this).addClass("nav_style1_content_hover1");var d=a.body.find(".nav_style1_content_li").index(this),g=a.body.find(".nav_style1_sub").eq(d);a.body.find(".nav_style1_sub").hide();g.show();_d=g.find(".nav_style3_SubClass2_content");if(_d.height()>b){var q=!0,f=null;_h=30;g.find(".nav_style3_SubClass2").height(b);_d.css("position","absolute");_d.height()-b+
_d.position().top>_h&&g.find(".next").show();g.find(".next").unbind();g.find(".next").mouseup(function(){q=!1;var a=_d.position().top;_d.height()-b+a<2*_h&&g.find(".next").fadeOut(150)});g.find(".next").mousedown(function(){_sp=3;_dir="D";setTimeout(function(){m()},180);q=!0});g.find(".prev").unbind();g.find(".prev").mouseup(function(){q=!1;var a=_d.position().top;Math.abs(a)<2*_h&&g.find(".prev").fadeOut(150)});g.find(".prev").mousedown(function(){_sp=-3;_dir="U";setTimeout(function(){m()},180);
q=!0});var m=function(){var a=_d.position().top,c=_d.height()-b+a;c>_h&&Math.abs(a)>_h?slip(0):"D"==_dir?c>_h?(slip(0),g.find(".prev").is(":hidden")&&g.find(".prev").fadeIn(150)):(c==_h&&slip(0),q=!1):Math.abs(a)>_h?(slip(0),g.find(".next").is(":hidden")&&g.find(".next").fadeIn(150)):(Math.abs(a)==_h&&slip(0),q=!1);q&&(null==f&&(f=arguments.callee),setTimeout(function(){f()},150))}}else g.height()<c&&g.height(c);d=$(this).offset().top-a.body.find(".nav_style3_main_content").offset().top;d+=$(this).height()+
10;g.height()<d&&g.css("top",Math.round(d-g.height())+"px")},function(){});a.body.find(".nav_style3_main_content").hover(function(){},function(){a.body.find(".nav_style1_content_li").removeClass("nav_style1_content_hover1");a.body.find(".nav_style1_sub").hide()});break;case 4:b=480,c=60,a.body.find(".nav_style1_content").css("cursor","default"),a.body.find(".nav_style4_Class12").hover(function(){a.body.find(".nav_style4_Class12").removeClass("nav_style1_content_hover");$(this).addClass("nav_style1_content_hover");
var d=a.body.find(".nav_style4_Class12").index(this),g=a.body.find(".nav_style1_sub").eq(d);a.body.find(".nav_style1_sub").hide();g.show();_d=g.find(".nav_style_all_scroll_content");if(_d.height()>b){var q=!0,f=!1,m=null,e;g.find(".nav_style_all_scroll_box").height(b);_d.css("position","absolute");0<_d.height()-b+_d.position().top&&g.find(".next").show();g.find(".next").unbind();g.find(".next").mouseup(function(){f=!1;var a=_d.position().top,c=_d.height()-b,d=parseInt(c+a);q?(clearInterval(e),65>=
d?(g.find(".next").fadeOut(150),_d.animate({top:-c})):_d.animate({top:a-65}),g.find(".prev").is(":hidden")&&g.find(".prev").fadeIn(150)):0>=d&&g.find(".next").fadeOut(150)});g.find(".next").mousedown(function(){_sp=3;_dir="D";f=q=!0;e=setTimeout(function(){k()},180)});g.find(".prev").unbind();g.find(".prev").mouseup(function(){f=!1;var a=_d.position().top;q?(clearInterval(e),65>=Math.abs(a)?(g.find(".prev").fadeOut(150),_d.animate({top:0})):_d.animate({top:a+65}),g.find(".next").is(":hidden")&&g.find(".next").fadeIn(150)):
0>=Math.abs(a)&&g.find(".prev").fadeOut(150)});g.find(".prev").mousedown(function(){_sp=-3;_dir="U";f=q=!0;e=setTimeout(function(){k()},180)});var k=function(){q=!1;var a=_d.position().top,c=_d.height()-b,d=c+a;3<d&&3<Math.abs(a)?_d[0].style.top=a-_sp+"px":"D"==_dir?3<=d?(_d[0].style.top=a-_sp+"px",g.find(".prev").is(":hidden")&&g.find(".prev").fadeIn(150)):(_d[0].style.top=-c+"px",f=!1):3<=Math.abs(a)?(_d[0].style.top=a-_sp+"px",g.find(".next").is(":hidden")&&g.find(".next").fadeIn(150)):(_d[0].style.top=
"0px",f=!1);f&&(null==m&&(m=arguments.callee),setTimeout(function(){m()},15))}}else g.height()<c&&g.height(c);d=$(this).offset().top-a.body.find(".nav_style4_main_content").offset().top;d+=$(this).height()+10;g.height()<d&&g.css("top",Math.round(d-g.height())+"px")},function(){}),a.body.find(".nav_style4_main_content").hover(function(){},function(){a.body.find(".nav_style4_Class12").removeClass("nav_style1_content_hover");a.body.find(".nav_style1_sub").hide()})}a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&
(a.body.find(".class1").css("cursor","pointer"),a.body.find(".class1").click(function(){var b=$(this).attr("class1_id");switch(a.data.Type){case Constant.PLUGIN_STORE_NAVIGATION_TYPE_NAV:goto_search_goods_link(null,b,null,null,null,null,a.opts.store_info.seller_sub_id);break;case Constant.PLUGIN_STORE_NAVIGATION_TYPE_SELLERSUB:goto_search_store_link(null,b,null,null)}}),a.body.find(".class2").css("cursor","pointer"),a.body.find(".class2").click(function(){var b=$(this).attr("class2_id");switch(a.data.Type){case Constant.PLUGIN_STORE_NAVIGATION_TYPE_NAV:goto_search_goods_link(null,
null,b,null,null,null,a.opts.store_info.seller_sub_id);break;case Constant.PLUGIN_STORE_NAVIGATION_TYPE_SELLERSUB:goto_search_store_link(null,null,b,null)}}),a.body.find(".class3").css("cursor","pointer"),a.body.find(".class3").click(function(){var b=$(this).attr("class3_id");switch(a.data.Type){case Constant.PLUGIN_STORE_NAVIGATION_TYPE_NAV:goto_search_goods_link(null,null,null,b,null,null,a.opts.store_info.seller_sub_id);break;case Constant.PLUGIN_STORE_NAVIGATION_TYPE_SELLERSUB:goto_search_store_link(null,
null,null,b)}}))}}catch(d){}size_nav_all(a)}function size_nav_all(a){var b=set_plugin_boder_size(a),c=b.width,b=b.height;switch(a.data.Style){case 0:a.body.find(".nav_style0_main_content").width(c),a.body.find(".nav_style0_main_content").height(b),600>=c?a.body.find(".nav_style0_a").css("width","100%"):a.body.find(".nav_style0_a").css("width","49%")}}
function show_nav_seller(a){try{if(a.show_mode!=PluginConstant.SHOW_MODE_STATIC)switch(a.body.empty(),show_title(a),a.nav_data=a.get_nav_data(),a.data.Style){case 0:$("#seller_nav_all_style0_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));break;case 1:$("#seller_nav_all_style1_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));break;case 2:$("#seller_nav_all_style2_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));break;case 3:$("#seller_nav_all_style3_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));
break;case 4:$("#seller_nav_all_style4_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"))}switch(a.data.Style){case 1:case 3:case 4:a.body.find(".plugin_title_border").hasClass("Nav_TitleStyleBox")||a.body.find(".plugin_title_border").addClass("Nav_TitleStyleBox")}switch(a.show_mode){case PluginConstant.SHOW_MODE_STATIC:case PluginConstant.SHOW_MODE_DISPLAY:a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(a.body.find(".class1").css("cursor","pointer"),a.body.find(".class1").click(function(){var b=
$(this).attr("class1_id");switch(a.data.Type){case Constant.PLUGIN_STORE_NAVIGATION_TYPE_NAV:goto_search_goods_link(null,b,null,null,null,null,a.opts.store_info.seller_sub_id);break;case Constant.PLUGIN_STORE_NAVIGATION_TYPE_SELLERSUB:goto_search_store_link(null,b,null,null)}}))}}catch(b){}size_nav_all(a)}
function size_nav_seller(a){var b=set_plugin_boder_size(a),c=b.width,b=b.height;switch(a.data.Style){case 0:a.body.find(".nav_style0_main_content").width(c),a.body.find(".nav_style0_main_content").height(b),600>=c?a.body.find(".nav_style0_a").css("width","100%"):a.body.find(".nav_style0_a").css("width","49%")}}
function show_nav_v(a){try{if(a.show_mode!=PluginConstant.SHOW_MODE_STATIC)switch(a.body.empty(),show_title(a),a.nav_data=a.get_nav_data(),a.data.Style){case 0:$("#store_nav_v_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"))}a.show_mode==PluginConstant.SHOW_MODE_DISPLAY&&(a.body.find(".nav_class2").click(function(){var b=$(this).attr("class2_id");switch(a.data.Type){case Constant.PLUGIN_STORE_NAVIGATION_TYPE_NAV:goto_search_goods_link(null,null,b,null,null,null,a.opts.store_info.seller_sub_id);
break;case Constant.PLUGIN_STORE_NAVIGATION_TYPE_SELLERSUB:goto_search_store_link(null,null,b,null)}}),a.body.find(".nav_class3").click(function(){var b=$(this).attr("class3_id");switch(a.data.Type){case Constant.PLUGIN_STORE_NAVIGATION_TYPE_NAV:goto_search_goods_link(null,null,null,b,null,null,a.opts.store_info.seller_sub_id);break;case Constant.PLUGIN_STORE_NAVIGATION_TYPE_SELLERSUB:goto_search_store_link(null,null,null,b)}}))}catch(b){}size_nav_v(a)}
function size_nav_v(a){set_plugin_boder_size(a)}function show_nav_v_seller(a){try{if(a.show_mode!=PluginConstant.SHOW_MODE_STATIC)switch(a.body.empty(),show_title(a),a.nav_data=a.get_nav_data(),a.data.Style){case 0:$("#seller_nav_v_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"))}}catch(b){}size_nav_v_seller(a)}function size_nav_v_seller(a){set_plugin_boder_size(a)}
function show_nav_tag(a){try{a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(a.body.empty(),show_title(a),$("#store_nav_tag_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"))),2==a.data.Style?a.show_mode!=PluginConstant.SHOW_MODE_DISPLAY&&a.show_mode!=PluginConstant.SHOW_MODE_STATIC||a.body.find("#nav_tag_seach").click(function(){var b=a.body.find("#nav_tag_select").val();if(CheckInput.IsEmpty(b))return alert("\u8bf7\u9009\u62e9\u6709\u6548\u7684\u67e5\u8be2\u6761\u4ef6"),!1;goto_search_goods_link(null,
null,null,null,null,b,a.opts.store_info.seller_sub_id)}):a.show_mode==PluginConstant.SHOW_MODE_DISPLAY&&a.body.find(".tag_item").click(function(){var b=$(this).attr("item_id");goto_search_goods_link(null,null,null,null,null,b,a.opts.store_info.seller_sub_id)})}catch(b){}size_nav_tag(a)}function size_nav_tag(a){set_plugin_boder_size(a)}
function show_text_news(a){try{if(a.show_mode!=PluginConstant.SHOW_MODE_STATIC)switch(a.body.empty(),show_title(a),a.data.Style){case 0:$("#text_news_style0_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));break;case 1:$("#text_news_style1_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));break;case 2:$("#text_news_style2_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));break;case 3:$("#text_news_style3_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));
break;case 4:$("#text_news_style4_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));break;case 5:$("#text_news_style5_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));break;case 6:$("#text_news_style6_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"))}}catch(b){}news_click(a);size_text_news(a)}
function size_text_news(a){var b=set_plugin_boder_size(a).height;switch(a.data.Style){case 0:case 1:case 3:case 4:case 5:case 6:a.body.find(".news_title").each(function(){var a=$(this).parent().width();$(this).find("div").width(a-16)});break;case 2:a.body.find(".news_title").each(function(){var a=$(this).parent(),b=a.width(),a=a.find(".text_news_style2_position").width();$(this).find("div").width(b-a)})}var c=a.body.find(".text_news_list li").height(),b=Math.floor(b/c);a.body.find(".plugin_news_main_content").height(c*
b);!0==a.data.Roll&&a.body.find(".text_news_list").carouFredSel({items:b,auto:Number(a.data.Interval),scroll:{items:1,pauseOnHover:!0},direction:a.data.Direction==Constant.PLUGIN_CAROUSEL_DIR_UP?"up":"down"})}
function show_graphic_news(a){try{if(a.show_mode!=PluginConstant.SHOW_MODE_STATIC)switch(a.body.empty(),show_title(a),a.data.Style){case 0:$("#graphic_news_style0_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));break;case 1:$("#graphic_news_style1_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));break;case 2:$("#graphic_news_style2_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));break;case 3:$("#graphic_news_style3_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));
break;case 4:$("#graphic_news_style4_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"))}}catch(b){}news_click(a);size_graphic_news(a)}
function size_graphic_news(a){var b=set_plugin_boder_size(a),c=b.width,b=b.height;switch(a.data.Style){case 0:var d=a.body.find(".graphic_news_style0_img").width(),c=c-d-5;a.body.find(".graphic_news_style0_news").width(c);break;case 1:d=a.body.find(".graphic_news_style1_img").width();c=c-d-5;a.body.find(".graphic_news_style1_news").width(c);break;case 2:case 3:case 4:a.body.find(".graphic_news_style0_news").each(function(){var a=$(this).parent().find(".graphic_news_style0_img").width(),b=$(this).parent().width();
$(this).width(b-a-7);$(this).find("span .news_title").width(b-a-16)})}if(!0==a.data.Roll)switch(a.data.Style){case 0:case 2:case 3:case 4:c=a.body.find(".graphic_news_style0_list li").height();b=Math.round(b/c);a.body.find(".graphic_news_style0_list").carouFredSel({items:b,auto:Number(a.data.Interval),scroll:{items:1,pauseOnHover:!0,onBefore:function(){a.body.find("img.lazy[src='/blank.png']").lazyload({threshold:20})}},direction:a.data.Direction==Constant.PLUGIN_CAROUSEL_DIR_UP?"up":"down"});break;
case 1:c=a.body.find(".graphic_news_style1_list li").height(),b=Math.round(b/c),a.body.find(".graphic_news_style1_list").carouFredSel({items:b,auto:Number(a.data.Interval),scroll:{items:1,pauseOnHover:!0,onBefore:function(){a.body.find("img.lazy[src='/blank.png']").lazyload({threshold:20})}},direction:a.data.Direction==Constant.PLUGIN_CAROUSEL_DIR_UP?"up":"down"})}a.body.find("img.lazy").lazyload({effect:"fadeIn",threshold:20})}
function news_click(a){switch(a.show_mode){case PluginConstant.SHOW_MODE_DISPLAY:a.body.find(".news_title").click(function(){var b=$(this).attr("news_id"),c=$(this).attr("index_id"),b=a.get_news(b);if(null!=b)switch(b.LinkType){case Constant.LINK_TYPE_NONE:goto_news_link(a.opts.store_info.seller_sub_name,c,plugin_save_level);break;case Constant.LINK_TYPE_URL:goto_url_link(b.LinkParam);break;case Constant.LINK_TYPE_SEARCH:goto_search_goods_link(b.LinkParam,null,null,null,null,null,a.opts.store_info.seller_sub_id);
break;case Constant.LINK_TYPE_CLASS:try{var d=$.parseJSON(b.LinkParam);d.class1_id=CheckInput.IsEmpty(d.class1_id)?null:d.class1_id;d.class2_id=CheckInput.IsEmpty(d.class2_id)?null:d.class2_id;d.class3_id=CheckInput.IsEmpty(d.class3_id)?null:d.class3_id;goto_search_goods_link(null,d.class1_id,d.class2_id,d.class3_id,null,null,a.opts.store_info.seller_sub_id)}catch(n){}break;case Constant.LINK_TYPE_PAGE:goto_page_link(a.opts.store_info.seller_sub_name,b.LinkParam,plugin_save_level,!0);break;case Constant.LINK_TYPE_SALES:goto_search_goods_link(null,
null,null,null,b.LinkParam,null,a.opts.store_info.seller_sub_id);break;case Constant.LINK_TYPE_GOODS:goto_goods_link(b.LinkParam,!0);break;case Constant.LINK_TYPE_TAGITEM:goto_search_goods_link(null,null,null,null,null,b.LinkParam,a.opts.store_info.seller_sub_id);break;case Constant.LINK_TYPE_SELLER_SUB:goto_sub_link(b.LinkParam)}})}}
function show_advertising(a){try{switch(a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(a.body.empty(),show_title(a),$("#advertising_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"))),a.show_mode){case PluginConstant.SHOW_MODE_DISPLAY:a.body.find(".adv_image").css("cursor","pointer"),a.body.find(".adv_image").click(function(){var b=$(this).attr("index"),b=a.data.Advertising[b];null!=b&&goto_custom_link(b.LinkType,b.LinkParam,plugin_save_level,a.opts.store_info.seller_sub_name,a.opts.store_info.seller_sub_id)})}}catch(b){}size_advertising(a)}
function parts_size_advertising(a,b){var c=get_plugin_inner_size(a),d=[];d.push({w:c.width,h:c.height});return d[b]}
function size_advertising(a){var b=set_plugin_boder_size(a),c=b.width,b=b.height;0==a.data.Style?(a.body.find(".banner_img li").width(c),a.body.find(".banner_img li").height(b),a.body.find(".banner_img img").width(c),a.body.find(".banner_img img").height(b),a.body.find(".banner_img").carouFredSel({items:1,auto:Number(a.data.Interval),scroll:{items:1,pauseOnHover:!0,onBefore:function(){a.body.find("img.lazy[src='/blank.png']").lazyload({threshold:20})}},direction:a.data.Direction==Constant.PLUGIN_CAROUSEL_DIR_LEFT?
"left":"right",pagination:{container:a.body.find(".banner_number"),anchorBuilder:function(a){return'<a class="bg_j" href="javascript:void(0)">'+a+"</a>"}}})):(a.body.find(".slideshow").width(10*c),a.body.find(".slideshow").height(b),a.body.find(".slideshow li").width(c),a.body.find(".slideshow li").height(b),a.body.find(".slideshow img").width(c),a.body.find(".slideshow img").height(b),a.body.find(".next_arrow").css("top",Math.floor((b-42)/2)+"px"),a.body.find(".prev_arrow").css("top",Math.floor((b-
42)/2)+"px"),a.body.find(".plugin_inner_content").mouseover(function(){a.body.find(".next_arrow_box").show();a.body.find(".prev_arrow_box").show()}).mouseout(function(){a.body.find(".next_arrow_box").hide();a.body.find(".prev_arrow_box").hide()}),a.body.find(".slides").carouFredSel({items:1,auto:Number(a.data.Interval),scroll:{items:1,pauseOnHover:!0,onBefore:function(){a.body.find("img.lazy[src='/blank.png']").lazyload({threshold:20})}},direction:a.data.Direction==Constant.PLUGIN_CAROUSEL_DIR_LEFT?
"left":"right",prev:a.body.find(".next_arrow_box"),next:a.body.find(".prev_arrow_box")}),a.body.find(".next_arrow_box").hide(),a.body.find(".prev_arrow_box").hide());a.body.find("img.lazy").lazyload({effect:"fadeIn",threshold:20})}
function show_image(a){try{switch(a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(a.body.empty(),show_title(a),$("#image_type"+a.data.Type+"_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"))),a.show_mode){case PluginConstant.SHOW_MODE_DISPLAY:for(var b=0;b<a.data.Advertising.length;b++){var c=a.body.find("#image"+b);c.attr("index",b);c.css("cursor","pointer");c.click(function(){var b=$(this).attr("index"),b=a.data.Advertising[b];null!=b&&goto_custom_link(b.LinkType,b.LinkParam,plugin_save_level,
a.opts.store_info.seller_sub_name,a.opts.store_info.seller_sub_id)})}}}catch(d){}size_image(a)}function parts_size_image(a,b){var c=size_image_calc(a);return b<c.length?c[b]:{w:0,h:0}}function size_image_calc(a){a=csharp_size_image_calc(a.frame_config,a.body.width(),a.body.height(),a.plugin_type,a.data.ShowTitle,a.data.Type,a.data.Style);for(var b=0;b<a.length;b++)a[b].w=parseInt(a[b].w),a[b].h=parseInt(a[b].h);return a}
function size_image(a){set_plugin_boder_size(a);if(a.show_mode!=PluginConstant.SHOW_MODE_STATIC){var b=size_image_calc(a);a.body.find(".li1").width(Math.floor(b[1].w));a.body.find(".li1").height(Math.floor(b[1].h));a.body.find(".li2").width(Math.floor(b[2].w));a.body.find(".li2").height(Math.floor(b[2].h));a.body.find(".li3").width(Math.floor(b[3].w));a.body.find(".li3").height(Math.floor(b[3].h));a.body.find(".li4").width(Math.floor(b[4].w));a.body.find(".li4").height(Math.floor(b[4].h));a.body.find(".li5").width(Math.floor(b[5].w));
a.body.find(".li5").height(Math.floor(b[5].h));a.body.find(".li6").width(Math.floor(b[6].w));a.body.find(".li6").height(Math.floor(b[6].h));a.body.find(".li7").width(Math.floor(b[7].w));a.body.find(".li7").height(Math.floor(b[7].h));a.body.find(".li8").width(Math.floor(b[8].w));a.body.find(".li8").height(Math.floor(b[8].h));a.body.find(".li9").width(Math.floor(b[9].w));a.body.find(".li9").height(Math.floor(b[9].h))}a.body.find("img.lazy").lazyload({effect:"fadeIn",threshold:20})}
function show_carousel(a){try{a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(a.body.empty(),show_title(a),$("#carousel_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content")));switch(a.show_mode){case PluginConstant.SHOW_MODE_DISPLAY:a.body.find(".adv_image").css("cursor","pointer"),a.body.find(".adv_image, .adv_text").click(function(){var b=$(this).attr("index"),b=a.data.Advertising[b];null!=b&&goto_custom_link(b.LinkType,b.LinkParam,plugin_save_level,a.opts.store_info.seller_sub_name,a.opts.store_info.seller_sub_id)})}a.data.Setting.ShowText==
Constant.PLUGIN_CAROUSEL_TEXT_NONE?a.body.find(".adv_text").hide():a.body.find(".adv_text").show()}catch(b){}size_carousel(a)}
function parts_size_carousel(a,b){var c=get_plugin_inner_size(a),d=[];d.push({w:c.width,h:c.height});for(var n=0,g=0,n=a.data.Setting.Gap==Constant.PLUGIN_CAROUSEL_GAP_NONE?parseInt(c.width/a.data.Setting.ShowNumber):parseInt((c.width-4*a.data.Setting.ShowNumber)/a.data.Setting.ShowNumber),g=a.data.Setting.ShowText==Constant.PLUGIN_CAROUSEL_TEXT_NONE?c.height:c.height-40,c=0;c<a.data.Advertising.length;c++)d.push({w:n,h:g});return d[b]}
function size_carousel(a){var b=set_plugin_boder_size(a),c=b.height,d=0,n=0,d=a.data.Setting.Gap==Constant.PLUGIN_CAROUSEL_GAP_NONE?parseInt(b.width/a.data.Setting.ShowNumber):parseInt((b.width-4*a.data.Setting.ShowNumber)/a.data.Setting.ShowNumber),n=a.data.Setting.ShowText==Constant.PLUGIN_CAROUSEL_TEXT_NONE?b.height:b.height-40;a.body.find(".plugin_carousel_box li").width(d);a.body.find(".plugin_carousel_box li").height(c);a.data.Setting.Gap==Constant.PLUGIN_CAROUSEL_GAP_NONE?(a.body.find(".plugin_carousel_box li").css("margin-left",
"0px"),a.body.find(".plugin_carousel_box li").css("margin-right","0px")):(a.body.find(".plugin_carousel_box li").css("margin-left","2px"),a.body.find(".plugin_carousel_box li").css("margin-right","2px"));a.body.find(".plugin_carousel_box li img").width(d);a.body.find(".plugin_carousel_box li img").height(n);a.body.show();a.body.find(".plugin_carousel_box").carouFredSel({items:Number(a.data.Setting.ShowNumber),auto:Number(a.data.Setting.Interval),scroll:{items:1,pauseOnHover:!0,onBefore:function(){a.body.find("img.lazy[src='/blank.png']").lazyload({threshold:20})}},
direction:a.data.Setting.Direction==Constant.PLUGIN_CAROUSEL_DIR_LEFT?"left":"right"});a.body.find("img.lazy").lazyload({effect:"fadeIn",threshold:20})}
function showcase_goods_process(a,b,c,d){var n={};n.Style=a.data.Style;n.show_mode=a.show_mode;n.GoodsStyle=a.data.GoodsStyle;n.IsShowCart=a.data.IsShowCart;n.CartStyle=a.data.CartStyle;null==c&&a.show_mode==PluginConstant.SHOW_MODE_STATIC?(n.label={},n.label.Goods=[],b.find(".goods_list").each(function(){n.label.Goods.push({RuleId:$(this).attr("RuleId"),RuleType:$(this).attr("RuleType"),RuleStartTime:CheckInput.IsEmpty($(this).attr("RuleStartTime"))?null:$(this).attr("RuleStartTime").replace(RegExp("[\\\\]",
"g"),""),RuleEndTime:CheckInput.IsEmpty($(this).attr("RuleEndTime"))?null:$(this).attr("RuleEndTime").replace(RegExp("[\\\\]","g"),""),Price:$(this).attr("Price"),MarketPrice:$(this).attr("MarketPrice"),DiscountPrice:$(this).attr("DiscountPrice"),LevelDiscount:eval($(this).attr("LevelDiscount"))})})):n.label=c;n.label.index=d;if(a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(b.empty(),$("#showcase_goods_tmpl").tmpl(n).appendTo(b),a.show_mode==PluginConstant.SHOW_MODE_EDIT&&(null==n.label.Goods||0>=
n.label.Goods.length)))switch(a.data.Style){case 0:b.addClass("empty_goods1");break;case 1:b.addClass("empty_goods2");break;case 2:b.addClass("empty_goods3")}a.show_mode==PluginConstant.SHOW_MODE_STATIC&&b.find(".add_goods_to_cart").click(function(){if($(this).attr("Status")==Constant.OPEN){var a=$(this).attr("GoodsId"),b=$(this).attr("FromSellerSubId"),c={BuyerId:0,CartId:0};c.GoodsId=a;c.Count=1;c.Time=null;c.FromSellerSubId=b;$.ajax({url:getActionPath("GetGoodsNumByProperty","Goods"),dataType:"json",
contentType:"application/json",type:"POST",data:stringify({goods_id:a}),success:function(a){!0==a.success?1>parseInt(a.goodsNum)?alert("\u8be5\u5546\u54c1\u6682\u65f6\u7f3a\u8d27"):(c.Prop1ItemId=a.Prop1ItemId,c.Prop2ItemId=a.Prop2ItemId,c.Prop3ItemId=a.Prop3ItemId,$.ajax({url:getActionPath("AddCartGoods","Cart"),dataType:"json",async:!1,contentType:"application/json",type:"POST",traditional:!0,data:stringify({cart_goods:c}),success:function(a){a.success?alert("\u5df2\u5c06\u8be5\u5546\u54c1\u52a0\u5165\u5230\u8d2d\u7269\u8f66!"):
ShowActionError(a.error,"buyer")},error:function(a,b,c){ShowAjaxError(a,b,c)}})):(This.data=null,This.property_data=null,ShowActionError(a.error,"buyer"))},error:function(a,b,c){This.data=null;This.property_data=null;ShowAjaxError(a,b,c)}})}else alert("\u8be5\u5546\u54c1\u4e0d\u5b58\u5728\u6216\u8005\u5df2\u7ecf\u88ab\u5220\u9664,\u65e0\u6cd5\u6dfb\u52a0\u5230\u8d2d\u7269\u8f66")});b.find(".goods_list").each(function(a){a=n.label.Goods[a];var b=get_goods_sales(a);b.rule_display?(null!=b.rule_icon&&
b.rule_icon.appendTo($(this).find("#sales_icon")),null!=b.rule_price&&$(this).find("#sales_price").text((b.rule_price/100).toFixed(2))):(b=get_logon_level_index(),null!=b&&0<b&&(a=a.Price-parseInt(a.Price*a.LevelDiscount[b-1]/1E4),$(this).find("#sales_price").text((a/100).toFixed(2))))});switch(a.data.Style){case 0:showcase_fix_image(b.find(".showcase_goods_style0_img").width(),b.find(".showcase_goods_style0_img").height(),b.find(".showcase_goods_style0_img img"),1);break;case 1:showcase_fix_image(b.find(".showcase_goods_style1").width(),
b.find(".showcase_goods_style1").height(),b.find(".showcase_goods_style1 img"),1)}switch(a.show_mode){case PluginConstant.SHOW_MODE_DISPLAY:b.find(".goods_list").css("cursor","pointer"),b.find(".goods_list").click(function(){var a=$(this).attr("goods_id");goto_goods_link(a,!0)});case PluginConstant.SHOW_MODE_PREVIEW:case PluginConstant.SHOW_MODE_STATIC:switch(a.data.Style){case 1:b.find(".showcase_goods_style1").hover(function(){$(this).find(".popup_product_name").fadeIn(200)},function(){$(this).find(".popup_product_name").fadeOut(200)})}break;
case PluginConstant.SHOW_MODE_EDIT:a.opts.can_setting&&(b.find(".showcase_goods_handle").each(function(){var a=$(this).parent(),b=a.width(),a=a.height();$(this).width(Math.round(b/2));$(this).height(Math.round(a/2));$(this).css("top",Math.round(a/4)+"px");$(this).css("left",Math.round(b/4)+"px")}),b.sortable({cancel:".sortable_cancel",handle:".showcase_goods_handle",stop:function(c,d){var f=b.find(".goods_list").index(d.item)+1;a.move_showcase_goods(d.item.attr("label_id"),d.item.attr("goods_id"),
f)}}))}}function showcase_fix_image(a,b,c,d){var n,g,q,f;a/b<=d?(g=0,f=b,n=Math.round((b*d-a)/2),q=Math.round(b*d)):(n=0,q=a,g=Math.round((a/d-b)/2),f=Math.round(a/d));c.css({width:q+"px",height:f+"px",marginLeft:"-"+n+"px",marginTop:"-"+g+"px"})}
function showcase_fix_list(a,b,c,d,n,g){switch(a.data.ShowTitle){case 0:a=6;break;case 1:a=0;break;default:a=12}d=Math.floor(c/(n+2));1>d&&(d=1);c=Math.floor((c-n*d)/(2*d));0>c&&(c=0);n=c;g=g+20-g-a;0>g&&(g=0);b.css("padding-left",c+"px");b.css("padding-right",n+"px");b.css("padding-top",a+"px");b.css("padding-bottom",g+"px")}
function show_showcase_type0(a){try{a.show_mode!=PluginConstant.SHOW_MODE_STATIC?(a.body.empty(),show_title(a),$("#showcase_type0_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content")),showcase_goods_process(a,a.body.find(".showcase_type0_goods"),a.data.Labels[0],0)):showcase_goods_process(a,a.body.find(".showcase_type0_goods"),null,0);if(!0==a.data.Roll)switch(Number(a.data.ArrowStyle)){case 0:a.body.find(".showcase_main_content").find(".plugin_touch_hover").hide();break;case 1:a.body.find(".showcase_main_content").find(".plugin_touch_hover").show();
break;case 2:a.body.find(".showcase_main_content").hover(function(){a.body.find(".showcase_main_content").find(".plugin_touch_hover").show()},function(){a.body.find(".showcase_main_content").find(".plugin_touch_hover").hide()})}else a.body.find(".showcase_main_content").find(".plugin_touch_hover").hide();switch(a.show_mode){case PluginConstant.SHOW_MODE_DISPLAY:case PluginConstant.SHOW_MODE_PREVIEW:a.body.find(".search_key").click(function(){var b=$(this).find("a").text();goto_search_goods_link(b,
null,null,null,null,null,a.opts.store_info.seller_sub_id)});break;case PluginConstant.SHOW_MODE_EDIT:a.opts.can_setting&&(a.body.find(".plugin_title_searchkey li").css("cursor","text"),a.body.find(".plugin_title_searchkey a").css("cursor","text"),a.body.find(".search_key").find("a").click(function(){var b=$(this).parents("li"),d=b.find("input");d.val($(this).text());d.width(b.width());d.height(b.height()-4);$(this).hide();d.show();d.focus();d.blur(function(){var n=$.trim(b.find("a").text()),g=$.trim(d.val()),
q=b.attr("index");CheckInput.IsEmpty(g)?a.del_search_key(q):n!=g?a.edit_search_key(q,g):(d.hide(),d.val(n),b.find("a").show())});d.keyup(function(a){13==a.keyCode?d.blur():27==a.keyCode&&(d.val(b.find("a").text()),d.blur())})}),a.body.find(".add_key").click(function(){var b=$(this).find("input");b.show();b.focus();b.blur(function(){var d=$.trim($(this).val());CheckInput.IsEmpty(d)||a.add_search_key(d);b.val("");b.hide()});b.keyup(function(a){13==a.keyCode?b.blur():27==a.keyCode&&(b.val(""),b.blur())})}),
a.body.find(".plugin_title_searchkey").sortable({cancel:".ui-state-disabled",stop:function(b,d){var n=d.item.attr("index"),g=a.body.find(".plugin_title_searchkey").find(".search_key").index(d.item);a.move_search_key(n,g)}}))}}catch(b){console.error(b)}size_showcase_type0(a)}
function size_showcase_type0(a){var b=set_plugin_boder_size(a),c=b.width,b=b.height;showcase_fix_list(a,a.body.find(".goods_list"),c,b,166,230);var d=a.body.find(".showcase_type0_goods li").width(),c=Math.floor(c/d);a.body.find(".next_arrow").css("top",Math.floor((b-42)/2)+"px");a.body.find(".prev_arrow").css("top",Math.floor((b-42)/2)+"px");!0==a.data.Roll&&(a.body.find(".showcase_type0_goods").carouFredSel({items:c,auto:a.data.IsManualRoll?!1:Number(a.data.Interval),next:0==a.data.ArrowStyle?null:
a.body.find(".next_arrow_box"),prev:0==a.data.ArrowStyle?null:a.body.find(".prev_arrow_box"),scroll:{items:1,pauseOnHover:!0,onBefore:function(){a.body.find("img.lazy[src='/blank.png']").lazyload({threshold:20})}},direction:a.data.Direction==Constant.PLUGIN_CAROUSEL_DIR_RIGHT?"right":"left"}),1!=Number(a.data.ArrowStyle)&&a.body.find(".showcase_main_content").find(".plugin_touch_hover").hide());a.body.find("img.lazy").lazyload({effect:"fadeIn",threshold:20})}
function showcase_sellersub_process(a,b,c,d){var n={};n.Style=a.data.Style;n.show_mode=a.show_mode;n.GoodsStyle=a.data.GoodsStyle;null==c&&a.show_mode==PluginConstant.SHOW_MODE_STATIC?(n.label={},n.label.SellerSub=[]):n.label=c;n.label.index=d;if(a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(b.empty(),$("#showcase_sellersub_tmpl").tmpl(n).appendTo(b),a.show_mode==PluginConstant.SHOW_MODE_EDIT&&(null==n.label.SellerSub||0>=n.label.SellerSub.length)))switch(a.data.Style){case 0:b.addClass("empty_seller_sub1");
break;case 1:b.addClass("empty_seller_sub2");break;case 2:b.addClass("empty_seller_sub3")}switch(a.data.Style){case 0:showcase_fix_image(b.find(".showcase_seller_sub_style0_img").width(),b.find(".showcase_seller_sub_style0_img").height(),b.find(".showcase_seller_sub_style0_img img"),1.6);break;case 1:showcase_fix_image(b.find(".showcase_seller_sub_style1").width(),b.find(".showcase_seller_sub_style1").height(),b.find(".showcase_seller_sub_style1 img"),1.6)}switch(a.show_mode){case PluginConstant.SHOW_MODE_DISPLAY:b.find(".seller_sub_list").css("cursor",
"pointer"),b.find(".seller_sub_list").click(function(){var a=$(this).attr("sub_name");goto_sub_link(a)});case PluginConstant.SHOW_MODE_PREVIEW:case PluginConstant.SHOW_MODE_STATIC:switch(a.data.Style){case 1:b.find(".showcase_seller_sub_style1").hover(function(){$(this).find(".popup_seller_sub_name").fadeIn(200)},function(){$(this).find(".popup_seller_sub_name").fadeOut(200)})}break;case PluginConstant.SHOW_MODE_EDIT:a.opts.can_setting&&(b.find(".showcase_seller_sub_handle").each(function(){var a=
$(this).parent(),b=a.width(),a=a.height();$(this).width(Math.round(b/2));$(this).height(Math.round(a/2));$(this).css("top",Math.round(a/4)+"px");$(this).css("left",Math.round(b/4)+"px")}),b.sortable({cancel:".sortable_cancel",handle:".showcase_seller_sub_handle",stop:function(c,d){var f=b.find(".seller_sub_list").index(d.item)+1;a.move_showcase_goods(d.item.attr("label_id"),d.item.attr("sub_id"),f)}}))}}
function show_sub_showcase_type0(a){try{a.show_mode!=PluginConstant.SHOW_MODE_STATIC?(a.body.empty(),show_title(a),$("#showcase_sellersub_type0_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content")),showcase_sellersub_process(a,a.body.find(".showcase_type0_seller_sub"),a.data.Labels[0],0)):showcase_sellersub_process(a,a.body.find(".showcase_type0_seller_sub"),null,0);if(!0==a.data.Roll)switch(Number(a.data.ArrowStyle)){case 0:a.body.find(".showcase_main_content").find(".plugin_touch_hover").hide();
break;case 1:a.body.find(".showcase_main_content").find(".plugin_touch_hover").show();break;case 2:a.body.find(".showcase_main_content").hover(function(){a.body.find(".showcase_main_content").find(".plugin_touch_hover").show()},function(){a.body.find(".showcase_main_content").find(".plugin_touch_hover").hide()})}else a.body.find(".showcase_main_content").find(".plugin_touch_hover").hide();switch(a.show_mode){case PluginConstant.SHOW_MODE_DISPLAY:case PluginConstant.SHOW_MODE_PREVIEW:a.body.find(".search_key").click(function(){var b=
$(this).find("a").text();goto_search_goods_link(b,null,null,null,null,null,a.opts.store_info.seller_sub_id)});break;case PluginConstant.SHOW_MODE_EDIT:a.opts.can_setting&&(a.body.find(".plugin_title_searchkey li").css("cursor","text"),a.body.find(".plugin_title_searchkey a").css("cursor","text"),a.body.find(".search_key").find("a").click(function(){var b=$(this).parents("li"),d=b.find("input");d.val($(this).text());d.width(b.width());d.height(b.height()-4);$(this).hide();d.show();d.focus();d.blur(function(){var n=
$.trim(b.find("a").text()),g=$.trim(d.val()),q=b.attr("index");CheckInput.IsEmpty(g)?a.del_search_key(q):n!=g?a.edit_search_key(q,g):(d.hide(),d.val(n),b.find("a").show())});d.keyup(function(a){13==a.keyCode?d.blur():27==a.keyCode&&(d.val(b.find("a").text()),d.blur())})}),a.body.find(".add_key").click(function(){var b=$(this).find("input");b.show();b.focus();b.blur(function(){var d=$.trim($(this).val());CheckInput.IsEmpty(d)||a.add_search_key(d);b.val("");b.hide()});b.keyup(function(a){13==a.keyCode?
b.blur():27==a.keyCode&&(b.val(""),b.blur())})}),a.body.find(".plugin_title_searchkey").sortable({cancel:".ui-state-disabled",stop:function(b,d){var n=d.item.attr("index"),g=a.body.find(".plugin_title_searchkey").find(".search_key").index(d.item);a.move_search_key(n,g)}}))}}catch(b){}size_sub_showcase_type0(a)}
function size_sub_showcase_type0(a){var b=set_plugin_boder_size(a),c=b.width,b=b.height;showcase_fix_list(a,a.body.find(".seller_sub_list"),c,b,225,230);var d=a.body.find(".showcase_type0_seller_sub li").width(),c=Math.floor(c/d);a.body.find(".next_arrow").css("top",Math.floor((b-42)/2)+"px");a.body.find(".prev_arrow").css("top",Math.floor((b-42)/2)+"px");!0==a.data.Roll&&(a.body.find(".showcase_type0_seller_sub").carouFredSel({items:c,auto:Number(a.data.Interval),next:0==a.data.ArrowStyle?null:a.body.find(".next_arrow_box"),
prev:0==a.data.ArrowStyle?null:a.body.find(".prev_arrow_box"),scroll:{items:1,pauseOnHover:!0,onBefore:function(){a.body.find("img.lazy[src='/blank.png']").lazyload({threshold:20})}},direction:a.data.Direction==Constant.PLUGIN_CAROUSEL_DIR_RIGHT?"right":"left"}),1!=Number(a.data.ArrowStyle)&&a.body.find(".showcase_main_content").find(".plugin_touch_hover").hide());a.body.find("img.lazy").lazyload({effect:"fadeIn",threshold:20})}
function show_sub_showcase_type1(a){function b(b){var c=a.body.find(".showcase_type1_title").find(".label_list"),d=a.body.find(".showcase_type1_seller_sub"),f=d.eq(b);if(a.show_mode==PluginConstant.SHOW_MODE_STATIC){var m=c.eq(b).attr("processed");if(null==m||"true"!=m)showcase_sellersub_process(a,f,null,b),c.eq(b).attr("processed","true")}c.index(this);c.removeClass("checked");c.eq(b).addClass("checked");d.hide();f.show();null==f.attr("lazy")&&a.body.find("img.lazy").lazyload({effect:"fadeIn",threshold:20});
f.attr("lazy","1")}try{if(a.show_mode!=PluginConstant.SHOW_MODE_STATIC){a.body.empty();show_title(a);$("#showcase_sellersub_type1_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));for(var c=0;c<a.data.Labels.length;c++)showcase_sellersub_process(a,a.body.find(".showcase_type1_seller_sub").eq(c),a.data.Labels[c],c);null!=a.data.Labels&&0<a.data.Labels.length&&(a.curr_label<a.data.Labels.length?b(a.curr_label):(a.curr_label=0,b(0)))}else a.curr_label=0,b(0);a.body.find(".showcase_type1_title").find(".label_list").hover(function(){var c=
a.body.find(".showcase_type1_title").find(".label_list").index(this);b(c);a.curr_label=c},function(){});switch(a.show_mode){case PluginConstant.SHOW_MODE_EDIT:a.opts.can_setting&&(a.body.find(".label_list a").css("cursor","text"),a.body.find(".label_list").find("a").click(function(){var b=$(this).parents("li"),c=b.find("input");c.val($(this).text());c.width(b.width());c.height(b.height()-4);$(this).hide();c.show();c.focus();c.blur(function(){var d=$.trim(b.find("a").text()),f=$.trim(c.val()),m=b.attr("label_id");
CheckInput.IsEmpty(f)?a.delete_label(m):d!=f&&a.change_label_name(m,f);c.hide();c.val(d);b.find("a").show()});c.keyup(function(a){13==a.keyCode?c.blur():27==a.keyCode&&(c.val(b.find("a").text()),c.blur())})}),a.body.find(".add_label").click(function(){var b=$(this).find("input");b.show();b.focus();b.blur(function(){var c=$.trim($(this).val());CheckInput.IsEmpty(c)||a.add_label(c);b.val("");b.hide()});b.keyup(function(a){13==a.keyCode?b.blur():27==a.keyCode&&(b.val(""),b.blur())})}),a.body.find(".showcase_type1_title").sortable({cancel:".sortable_cancel",
stop:function(b,c){var d=a.body.find(".showcase_type1_title").find("li").index(c.item)+1;a.move_label(c.item.attr("label_id"),d)}}))}}catch(d){}size_sub_showcase_type1(a)}function size_sub_showcase_type1(a){var b=set_plugin_boder_size(a),c=b.width,b=b.height;showcase_fix_list(a,a.body.find(".seller_sub_list"),c,b,225,230)}
function right_size_showcase_type0(a,b,c,d,n){b=5;c=1;switch(a.data.ShowTitle){case 0:c=0;break;case 1:c=0;break;default:c=1}switch(a.data.Style){case 0:b=5;break;case 1:b=5;break;default:b=2}a={cx:d,cy:n};a.cy=n<b+c?b+c:b+c+Math.floor((n-(b+c)+(b-1))/b)*b;return a}
function show_showcase_type1(a){function b(b){var c=a.body.find(".showcase_type1_title").find(".label_list"),d=a.body.find(".showcase_type1_goods"),f=d.eq(b);if(a.show_mode==PluginConstant.SHOW_MODE_STATIC){var m=c.eq(b).attr("processed");if(CheckInput.IsEmpty(m)||"true"!=m)showcase_goods_process(a,f,null,b),c.eq(b).attr("processed","true")}c.index(this);c.removeClass("checked");c.eq(b).addClass("checked");d.hide();f.show();null==f.attr("lazy")&&a.body.find("img.lazy").lazyload({effect:"fadeIn",threshold:20});
f.attr("lazy","1")}try{if(a.show_mode!=PluginConstant.SHOW_MODE_STATIC){a.body.empty();show_title(a);$("#showcase_type1_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));for(var c=0;c<a.data.Labels.length;c++)showcase_goods_process(a,a.body.find(".showcase_type1_goods").eq(c),a.data.Labels[c],c);null!=a.data.Labels&&0<a.data.Labels.length&&(a.curr_label<a.data.Labels.length?b(a.curr_label):(a.curr_label=0,b(0)))}else a.curr_label=0,b(0);a.body.find(".showcase_type1_title").find(".label_list").hover(function(){var c=
a.body.find(".showcase_type1_title").find(".label_list").index(this);b(c);a.curr_label=c},function(){});switch(a.show_mode){case PluginConstant.SHOW_MODE_EDIT:a.opts.can_setting&&(a.body.find(".label_list a").css("cursor","text"),a.body.find(".label_list").find("a").click(function(){var b=$(this).parents("li"),c=b.find("input");c.val($(this).text());c.width(b.width());c.height(b.height()-4);$(this).hide();c.show();c.focus();c.blur(function(){var d=$.trim(b.find("a").text()),f=$.trim(c.val()),m=b.attr("label_id");
CheckInput.IsEmpty(f)?a.delete_label(m):d!=f&&a.change_label_name(m,f);c.hide();c.val(d);b.find("a").show()});c.keyup(function(a){13==a.keyCode?c.blur():27==a.keyCode&&(c.val(b.find("a").text()),c.blur())})}),a.body.find(".add_label").click(function(){var b=$(this).find("input");b.show();b.focus();b.blur(function(){var c=$.trim($(this).val());CheckInput.IsEmpty(c)||a.add_label(c);b.val("");b.hide()});b.keyup(function(a){13==a.keyCode?b.blur():27==a.keyCode&&(b.val(""),b.blur())})}),a.body.find(".showcase_type1_title").sortable({cancel:".sortable_cancel",
stop:function(b,c){var d=a.body.find(".showcase_type1_title").find("li").index(c.item)+1;a.move_label(c.item.attr("label_id"),d)}}))}}catch(d){}size_showcase_type1(a)}function size_showcase_type1(a){var b=set_plugin_boder_size(a),c=b.width,b=b.height;showcase_fix_list(a,a.body.find(".goods_list"),c,b,166,230)}
function right_size_showcase_type1(a,b,c,d,n){b=5;switch(a.data.Style){case 0:b=5;break;case 1:b=5;break;default:b=2}a={cx:d,cy:n};a.cy=n<b+1?b+1:b+1+Math.floor((n-(b+1)+(b-1))/b)*b;return a}
function show_showcase_type2(a){try{a.show_mode!=PluginConstant.SHOW_MODE_STATIC?(a.body.empty(),show_title(a),$("#showcase_type2_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content")),showcase_goods_process(a,a.body.find(".showcase_type2_goods"),a.data.Labels[0],0)):showcase_goods_process(a,a.body.find(".showcase_type2_goods"),null,0)}catch(b){}size_showcase_type2(a)}
function size_showcase_type2(a){var b=set_plugin_boder_size(a),c=b.width,b=b.height;a.body.find(".showcase_type2_goods li").width(c);a.body.find(".showcase_type2_goods .a_text").width(c-5-90);c=a.body.find(".showcase_type2_goods li").height();c=Math.floor(b/c);!0==a.data.Roll&&a.body.find(".showcase_type2_goods").carouFredSel({items:c,auto:Number(a.data.Interval),scroll:{items:1,pauseOnHover:!0,onBefore:function(){a.body.find("img.lazy[src='/blank.png']").lazyload({threshold:20})}},direction:a.data.Direction==
Constant.PLUGIN_CAROUSEL_DIR_UP?"up":"down"});a.body.find("img.lazy").lazyload({effect:"fadeIn",threshold:20})}function right_size_showcase_type2(a,b,c,d,n){return right_size_showcase_type0(a,b,c,d,n)}
function show_message(a){function b(a,b,c){if(!CheckInput.IsEmpty(a.Contacts)&&a.Contacts.length>Constant.INPUT_REALNAME_MAX)return alert("\u59d3\u540d\u4e0d\u80fd\u5927\u4e8e"+Constant.INPUT_REALNAME_MAX+"\u4e2a\u5b57"),!1;if(CheckInput.IsEmpty(a.Phone)&&CheckInput.IsEmpty(a.Qq))return alert("\u8bf7\u81f3\u5c11\u7559\u4e0b\u4e00\u79cd\u8054\u7cfb\u65b9\u5f0f(\u624b\u673a\u53f7\u7801\u6216QQ\u53f7\u7801)"),!1;if(!CheckInput.IsEmpty(a.Phone)&&!CheckInput.IsMobilePhone(a.Phone))return alert("\u624b\u673a\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"),
!1;if(!CheckInput.IsEmpty(a.Qq)&&!CheckInput.IsQQ(a.Qq))return alert("QQ\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"),!1;if(!CheckInput.IsEmpty(a.Constant)&&a.Content.length>Constant.INPUT_SYS_MESAGE_CONTENT_MAX)return alert("\u7559\u8a00\u5185\u5bb9\u4e0d\u80fd\u5927\u4e8e"+Constant.INPUT_SYS_MESAGE_CONTENT_MAX+"\u4e2a\u5b57"),!1;b&&OpenLoadingDialog();$.ajax({url:getActionPath("MessageCreate","Store"),dataType:"json",contentType:"application/json",type:"POST",data:stringify({message:a}),success:function(a){b&&
CloseLoadingDialog();!0==a.success?null!=c&&c():ShowActionError(a.error,"buyer")},error:function(a,b,c){ShowAjaxError(a,b,c)}})}try{a.show_mode==PluginConstant.SHOW_MODE_STATIC?a.body.find("#message_add").click(function(){var c={};c.Contacts=$.trim(a.body.find("#contacts").val());c.Phone=$.trim(a.body.find("#phone").val());c.Qq=$.trim(a.body.find("#qq").val());c.Content=$.trim(a.body.find("#content").val());b(c,!0,function(){alert("\u60a8\u5df2\u7ecf\u7559\u8a00\u6210\u529f,\u611f\u8c22\u60a8\u7684\u652f\u6301!");
a.body.find("#contacts").val("");a.body.find("#phone").val("");a.body.find("#qq").val("");a.body.find("#content").val("")})}):(a.body.empty(),show_title(a),$("#plugin_message_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content")))}catch(c){}size_message(a)}function size_message(a){var b=set_plugin_boder_size(a).width;a.body.find(".plugin_message_Input").width(b-67)}
function show_coupon(a){function b(b,c,g,q){if(CheckInput.IsEmpty(c))return alert("\u8f93\u5165\u9519\u8bef\uff0c\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"),!1;if(CheckInput.IsEmpty(b))return alert("\u8f93\u5165\u9519\u8bef\uff0c\u8bf7\u8f93\u5165\u4f18\u60e0\u5238\u53f7\u7801"),!1;if(b.length>Constant.INPUT_SYS_COUPON_MAX)return alert("\u4f18\u60e0\u5238\u53f7\u7801\u4e0d\u80fd\u5927\u4e8e"+Constant.INPUT_SYS_COUPON_MAX+"\u4e2a\u5b57\u7b26\uff01"),!1;g&&OpenLoadingDialog();$.ajax({url:getActionPath("iKuCouponSearch",
"AccountOperation"),dataType:"json",contentType:"application/json",type:"POST",data:stringify({password:b,checkcode:c}),success:function(b){g&&CloseLoadingDialog();!0==b.success?null!=q&&q(b):ShowActionError(b.error,"buyer");a.body.find("#coupon_number").val("");a.body.find("#coupon_CheckCode").val("");change_checkcode(a.body.find("#CodeImg"))},error:function(a,b,c){ShowAjaxError(a,b,c)}})}try{a.show_mode==PluginConstant.SHOW_MODE_STATIC?(a.body.find("#coupon_search").click(function(){var c=$.trim(a.body.find("#coupon_number").val()),
n=$.trim(a.body.find("#coupon_CheckCode").val());b(c,n,!0,function(a){"PrepaidCard"==a.type&&alert("\u60a8\u7684\u4e0d\u8bb0\u540d\u62b5\u7528\u5238\u53ef\u7528\u4f59\u989d\u4e3a : [ "+(a.iKuCoupon/100).toFixed(2)+" ] \u5143");"DiscountCard"==a.type&&alert("\u60a8\u7684\u6298\u6263\u5361\u53ef\u4eab\u53d7\u6298\u6263\u4e3a : [ "+(a.iKuCoupon/1E3).toFixed(3)+" ] \u6298")})}),a.body.find("#CodeImg").click(function(){change_checkcode($(this))})):(a.body.empty(),show_title(a),$("#plugin_coupon_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content")))}catch(c){}size_coupon(a)}
function size_coupon(a){var b=set_plugin_boder_size(a).width;a.body.find(".big_show").hide();a.body.find(".small_show").show();a.body.find(".plugin_coupon_Input").width(b-2);a.body.find("#coupon_CheckCode").width(b-95)}function show_store_logon(a){try{a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(a.body.empty(),show_title(a),$("#plugin_store_logon_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content")))}catch(b){}size_store_logon(a)}function size_store_logon(a){set_plugin_boder_size(a)}
function show_sub_store(a){try{a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(a.body.empty(),show_title(a),$("#plugin_sub_store_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"))),a.show_mode!=PluginConstant.SHOW_MODE_EDIT&&a.body.find("#seller_sub_service_ctrl").hover(function(){a.body.find("#seller_sub_service").show()},function(){a.body.find("#seller_sub_service").hide()})}catch(b){}size_sub_store(a)}function size_sub_store(a){set_plugin_boder_size(a)}
function show_sub_store_list(a){try{a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(a.body.empty(),show_title(a),$("#plugin_sub_store_list_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content")))}catch(b){}size_sub_store_list(a)}
function size_sub_store_list(a){var b=set_plugin_boder_size(a).height,c=a.body.find(".plugin_sub_store_list_box li").height(),b=Math.floor(b/c);a.body.find(".plugin_sub_store_list_box").height(c*b);!0==a.data.Roll&&a.body.find(".plugin_sub_store_list_box").carouFredSel({items:b,auto:Number(a.data.Interval),scroll:{items:1,pauseOnHover:!0},direction:a.data.Direction==Constant.PLUGIN_CAROUSEL_DIR_UP?"up":"down"})}
function show_store_position(a){try{a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(a.body.empty(),show_title(a),$("#plugin_store_position_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content")))}catch(b){}size_store_position(a)}
function size_store_position(a){var b=set_plugin_boder_size(a),b="http://api.map.baidu.com/staticimage?width="+b.width+"&height="+b.height+"&center="+a.data.Longitude+","+a.data.Latitude+"&zoom="+a.data.PosZoom+"&markers="+a.data.Longitude+","+a.data.Latitude;a.body.find("#store_position_img").attr("src",b);a.show_mode!=PluginConstant.SHOW_MODE_EDIT?(b="http://api.map.baidu.com/marker?location="+a.data.Latitude+","+a.data.Longitude+"&title="+encodeURIComponent(a.data.PosTitle)+"&content="+encodeURIComponent(a.data.PosContent)+
"&output=html",a.body.find("#store_position_map").attr("href",b)):a.body.find("#store_position_map").removeAttr("target")}function show_sub_store_map(a){try{a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(a.body.empty(),show_title(a),$("#plugin_sub_store_map_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content")))}catch(b){}size_sub_store_map(a)}
function size_sub_store_map(a){set_plugin_boder_size(a);var b=Math.round(1E4*Math.random());a.body.find(".plugin_sub_store_map_box").attr("id","position_map_content_"+b);a.map=new BMap.Map("position_map_content_"+b);a.map.enableScrollWheelZoom();a.map.addControl(new BMap.NavigationControl);a.map.addControl(new BMap.ScaleControl);a.map.addControl(new BMap.OverviewMapControl);a.map.addControl(new BMap.MapTypeControl);if(null!=a.data&&null!=a.data.SubStore){for(var b=[],c=[],d=0;d<a.data.SubStore.length;d++)if(null!=
a.data.SubStore[d].Longitude&&null!=a.data.SubStore[d].Latitude){var n=new BMap.Point(a.data.SubStore[d].Longitude,a.data.SubStore[d].Latitude);c.push(n);n=new BMap.Marker(n);n.mark_data=a.data.SubStore[d];n.addEventListener("click",function(){var b=this,c=this.mark_data;if(null==b.is_show_window||!1==b.is_show_window){var d=null==c.CompanyName||""==c.CompanyName?c.Name:c.CompanyName,m="http://api.map.baidu.com/marker?location="+c.Latitude+","+c.Longitude+"&title="+encodeURIComponent("\u5546\u57ce\u4f4d\u7f6e")+
"&content="+encodeURIComponent(d)+"&output=html",c='<div style="margin:0;line-height:20px;padding:2px;"><a target="_blank" href="'+getActionPath(c.Name,"Sub")+'"><img src="'+c.StorePhoto+'" alt="" style="float:right;zoom:1;overflow:hidden;width:160px;height:100px;margin-left:3px;"/></a><div style="width:150px;height:80px;overflow:hidden;word-break:break-all;">'+c.Description+'</div><a target="_blank" href="'+getActionPath(c.Name,"Sub")+'">\u8fdb\u5165\u5e97\u94fa</a> &nbsp;&nbsp;&nbsp;<a target="_blank" href="'+
m+'">\u5230\u8fd9\u91cc\u53bb</a></div>',d=new BMap.InfoWindow(c,{title:d,width:320,height:130,enableMessage:!1});a.map.openInfoWindow(d,b.getPosition());b.is_show_window=!0;d.addEventListener("close",function(a){b.is_show_window=!1})}});b.push(n)}0<b.length?(a.map.setViewport(c),1<b.length?a.map_clusterer=new BMapLib.MarkerClusterer(a.map,{markers:b}):a.map.addOverlay(b[0])):(b=new BMap.Point(116.404,39.915),a.map.centerAndZoom(b,10))}else b=new BMap.Point(116.404,39.915),a.map.centerAndZoom(b,10)}
function slip(a){a<_h&&(_d[0].style.top=_d.position().top-_sp+"px",setTimeout(function(){slip(a+3)},15))};
